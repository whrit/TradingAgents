╭───────────────────────────────────────────────────────────────────── Traceback (most recent call last) ──────────────────────────────────────────────────────────────────────╮
│ /Users/beckett/Projects/TradingAgents/cli/main.py:1362 in analyze                                                                                                            │
│                                                                                                                                                                              │
│   1359                                                                                                                                                                       │
│   1360 @app.command()                                                                                                                                                        │
│   1361 def analyze():                                                                                                                                                        │
│ ❱ 1362 │   run_analysis()                                                                                                                                                    │
│   1363                                                                                                                                                                       │
│   1364                                                                                                                                                                       │
│   1365 if __name__ == "__main__":                                                                                                                                            │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/cli/main.py:1055 in run_analysis                                                                                                       │
│                                                                                                                                                                              │
│   1052 │   │                                                                                                                                                                 │
│   1053 │   │   # Stream the analysis                                                                                                                                         │
│   1054 │   │   trace = []                                                                                                                                                    │
│ ❱ 1055 │   │   for chunk in graph.graph.stream(init_agent_state, **args):                                                                                                    │
│   1056 │   │   │   if len(chunk["messages"]) > 0:                                                                                                                            │
│   1057 │   │   │   │   # Get the last message from the chunk                                                                                                                 │
│   1058 │   │   │   │   last_message = chunk["messages"][-1]                                                                                                                  │
│                                                                                                                                                                              │
│ ╭──────────────────────────────────────────────────────────────────────────────── locals ────────────────────────────────────────────────────────────────────────────────╮   │
│ │               agent = 'Compliance Officer'                                                                                                                             │   │
│ │     analyst_display = {                                                                                                                                                │   │
│ │                       │   <AnalystType.MACRO: 'macro'>: 'Macro Economist',                                                                                             │   │
│ │                       │   <AnalystType.MARKET: 'market'>: 'Market Analyst',                                                                                            │   │
│ │                       │   <AnalystType.SOCIAL: 'social'>: 'Social Media Analyst',                                                                                      │   │
│ │                       │   <AnalystType.NEWS: 'news'>: 'News Analyst',                                                                                                  │   │
│ │                       │   <AnalystType.FUNDAMENTALS: 'fundamentals'>: 'Fundamentals Analyst',                                                                          │   │
│ │                       │   <AnalystType.ALTERNATIVE: 'alternative'>: 'Alternative Data Analyst'                                                                         │   │
│ │                       }                                                                                                                                                │   │
│ │                args = {'stream_mode': 'values', 'config': {'recursion_limit': 100}}                                                                                    │   │
│ │               chunk = {                                                                                                                                                │   │
│ │                       │   'messages': [HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')],           │   │
│ │                       │   'company_of_interest': 'AAPL',                                                                                                               │   │
│ │                       │   'trade_date': '2025-11-16',                                                                                                                  │   │
│ │                       │   'market_report': '',                                                                                                                         │   │
│ │                       │   'sentiment_report': '',                                                                                                                      │   │
│ │                       │   'news_report': '',                                                                                                                           │   │
│ │                       │   'fundamentals_report': '',                                                                                                                   │   │
│ │                       │   'macro_report': '',                                                                                                                          │   │
│ │                       │   'alternative_data_report': '',                                                                                                               │   │
│ │                       │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                              │   │
│ │                       │   ... +8                                                                                                                                       │   │
│ │                       }                                                                                                                                                │   │
│ │              config = {                                                                                                                                                │   │
│ │                       │   'project_dir': '/Users/beckett/Projects/TradingAgents/tradingagents',                                                                        │   │
│ │                       │   'results_dir': './results',                                                                                                                  │   │
│ │                       │   'data_dir': '/Users/yluo/Documents/Code/ScAI/FR1-data',                                                                                      │   │
│ │                       │   'data_cache_dir': '/Users/beckett/Projects/TradingAgents/tradingagents/dataflows/data_cache',                                                │   │
│ │                       │   'llm_provider': 'openai',                                                                                                                    │   │
│ │                       │   'deep_think_llm': 'gpt-5.1',                                                                                                                 │   │
│ │                       │   'quick_think_llm': 'gpt-5.1',                                                                                                                │   │
│ │                       │   'backend_url': 'https://api.openai.com/v1',                                                                                                  │   │
│ │                       │   'cost_currency': 'USD',                                                                                                                      │   │
│ │                       │   'model_pricing': {                                                                                                                           │   │
│ │                       │   │   'gpt-5.1': {'input_cost_per_1k_tokens': 0.00125, 'output_cost_per_1k_tokens': 0.01},                                                     │   │
│ │                       │   │   'gpt-5-mini': {'input_cost_per_1k_tokens': 0.00025, 'output_cost_per_1k_tokens': 0.002},                                                 │   │
│ │                       │   │   'claude-3-5-sonnet-20241022': {'input_cost_per_1k_tokens': 0.015, 'output_cost_per_1k_tokens': 0.075},                                   │   │
│ │                       │   │   'claude-3-5-haiku-20241022': {'input_cost_per_1k_tokens': 0.0015, 'output_cost_per_1k_tokens': 0.005},                                   │   │
│ │                       │   │   'gemini-2.5-flash-preview-05-20': {'input_cost_per_1k_tokens': 0.0025, 'output_cost_per_1k_tokens': 0.0075}                              │   │
│ │                       │   },                                                                                                                                           │   │
│ │                       │   ... +29                                                                                                                                      │   │
│ │                       }                                                                                                                                                │   │
│ │             content = 'AAPL'                                                                                                                                           │   │
│ │        debate_state = {'history': '', 'current_response': '', 'count': 0}                                                                                              │   │
│ │ first_analyst_value = <AnalystType.MACRO: 'macro'>                                                                                                                     │   │
│ │       first_display = 'Macro Economist'                                                                                                                                │   │
│ │               graph = <tradingagents.graph.trading_graph.TradingAgentsGraph object at 0x122d889d0>                                                                     │   │
│ │    init_agent_state = {                                                                                                                                                │   │
│ │                       │   'messages': [('human', 'AAPL')],                                                                                                             │   │
│ │                       │   'company_of_interest': 'AAPL',                                                                                                               │   │
│ │                       │   'trade_date': '2025-11-16',                                                                                                                  │   │
│ │                       │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                              │   │
│ │                       │   'risk_debate_state': {                                                                                                                       │   │
│ │                       │   │   'history': '',                                                                                                                           │   │
│ │                       │   │   'current_risky_response': '',                                                                                                            │   │
│ │                       │   │   'current_safe_response': '',                                                                                                             │   │
│ │                       │   │   'current_neutral_response': '',                                                                                                          │   │
│ │                       │   │   'count': 0                                                                                                                               │   │
│ │                       │   },                                                                                                                                           │   │
│ │                       │   'market_report': '',                                                                                                                         │   │
│ │                       │   'fundamentals_report': '',                                                                                                                   │   │
│ │                       │   'sentiment_report': '',                                                                                                                      │   │
│ │                       │   'news_report': '',                                                                                                                           │   │
│ │                       │   'macro_report': '',                                                                                                                          │   │
│ │                       │   ... +8                                                                                                                                       │   │
│ │                       }                                                                                                                                                │   │
│ │        last_message = HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')                              │   │
│ │              layout = Layout()                                                                                                                                         │   │
│ │                live = <rich.live.Live object at 0x123ae8df0>                                                                                                           │   │
│ │            log_file = PosixPath('results/AAPL/2025-11-16/message_tool.log')                                                                                            │   │
│ │            msg_type = 'Reasoning'                                                                                                                                      │   │
│ │          report_dir = PosixPath('results/AAPL/2025-11-16/reports')                                                                                                     │   │
│ │         results_dir = PosixPath('results/AAPL/2025-11-16')                                                                                                             │   │
│ │          risk_state = {'history': '', 'current_risky_response': '', 'current_safe_response': '', 'current_neutral_response': '', 'count': 0}                           │   │
│ │             section = 'compliance_report'                                                                                                                              │   │
│ │          selections = {                                                                                                                                                │   │
│ │                       │   'ticker': 'AAPL',                                                                                                                            │   │
│ │                       │   'analysis_date': '2025-11-16',                                                                                                               │   │
│ │                       │   'analysts': [                                                                                                                                │   │
│ │                       │   │   <AnalystType.MACRO: 'macro'>,                                                                                                            │   │
│ │                       │   │   <AnalystType.MARKET: 'market'>,                                                                                                          │   │
│ │                       │   │   <AnalystType.SOCIAL: 'social'>,                                                                                                          │   │
│ │                       │   │   <AnalystType.NEWS: 'news'>,                                                                                                              │   │
│ │                       │   │   <AnalystType.FUNDAMENTALS: 'fundamentals'>,                                                                                              │   │
│ │                       │   │   <AnalystType.ALTERNATIVE: 'alternative'>                                                                                                 │   │
│ │                       │   ],                                                                                                                                           │   │
│ │                       │   'research_depth': 3,                                                                                                                         │   │
│ │                       │   'llm_provider': 'openai',                                                                                                                    │   │
│ │                       │   'backend_url': 'https://api.openai.com/v1',                                                                                                  │   │
│ │                       │   'shallow_thinker': 'gpt-5.1',                                                                                                                │   │
│ │                       │   'deep_thinker': 'gpt-5.1'                                                                                                                    │   │
│ │                       }                                                                                                                                                │   │
│ │        spinner_text = 'Analyzing AAPL on 2025-11-16...'                                                                                                                │   │
│ │               trace = [                                                                                                                                                │   │
│ │                       │   {                                                                                                                                            │   │
│ │                       │   │   'messages': [HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')],       │   │
│ │                       │   │   'company_of_interest': 'AAPL',                                                                                                           │   │
│ │                       │   │   'trade_date': '2025-11-16',                                                                                                              │   │
│ │                       │   │   'market_report': '',                                                                                                                     │   │
│ │                       │   │   'sentiment_report': '',                                                                                                                  │   │
│ │                       │   │   'news_report': '',                                                                                                                       │   │
│ │                       │   │   'fundamentals_report': '',                                                                                                               │   │
│ │                       │   │   'macro_report': '',                                                                                                                      │   │
│ │                       │   │   'alternative_data_report': '',                                                                                                           │   │
│ │                       │   │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                          │   │
│ │                       │   │   ... +8                                                                                                                                   │   │
│ │                       │   }                                                                                                                                            │   │
│ │                       ]                                                                                                                                                │   │
│ ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯   │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/langgraph/pregel/__init__.py:2436 in stream                                                         │
│                                                                                                                                                                              │
│   2433 │   │   │   │   while loop.tick(input_keys=self.input_channels):                                                                                                      │
│   2434 │   │   │   │   │   for task in loop.match_cached_writes():                                                                                                           │
│   2435 │   │   │   │   │   │   loop.output_writes(task.id, task.writes, cached=True)                                                                                         │
│ ❱ 2436 │   │   │   │   │   for _ in runner.tick(                                                                                                                             │
│   2437 │   │   │   │   │   │   [t for t in loop.tasks.values() if not t.writes],                                                                                             │
│   2438 │   │   │   │   │   │   timeout=self.step_timeout,                                                                                                                    │
│   2439 │   │   │   │   │   │   get_waiter=get_waiter,                                                                                                                        │
│                                                                                                                                                                              │
│ ╭─────────────────────────────────────────────────────────────────────────────── locals ───────────────────────────────────────────────────────────────────────────────╮     │
│ │                 _ = None                                                                                                                                             │     │
│ │             cache = None                                                                                                                                             │     │
│ │  callback_manager = <langchain_core.callbacks.manager.CallbackManager object at 0x123aeabf0>                                                                         │     │
│ │ checkpoint_during = None                                                                                                                                             │     │
│ │      checkpointer = None                                                                                                                                             │     │
│ │            config = {'tags': [], 'metadata': ChainMap({}), 'callbacks': None, 'recursion_limit': 100, 'configurable': {}}                                            │     │
│ │             debug = False                                                                                                                                            │     │
│ │        get_waiter = None                                                                                                                                             │     │
│ │             input = {                                                                                                                                                │     │
│ │                     │   'messages': [('human', 'AAPL')],                                                                                                             │     │
│ │                     │   'company_of_interest': 'AAPL',                                                                                                               │     │
│ │                     │   'trade_date': '2025-11-16',                                                                                                                  │     │
│ │                     │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                              │     │
│ │                     │   'risk_debate_state': {                                                                                                                       │     │
│ │                     │   │   'history': '',                                                                                                                           │     │
│ │                     │   │   'current_risky_response': '',                                                                                                            │     │
│ │                     │   │   'current_safe_response': '',                                                                                                             │     │
│ │                     │   │   'current_neutral_response': '',                                                                                                          │     │
│ │                     │   │   'count': 0                                                                                                                               │     │
│ │                     │   },                                                                                                                                           │     │
│ │                     │   'market_report': '',                                                                                                                         │     │
│ │                     │   'fundamentals_report': '',                                                                                                                   │     │
│ │                     │   'sentiment_report': '',                                                                                                                      │     │
│ │                     │   'news_report': '',                                                                                                                           │     │
│ │                     │   'macro_report': '',                                                                                                                          │     │
│ │                     │   ... +8                                                                                                                                       │     │
│ │                     }                                                                                                                                                │     │
│ │   interrupt_after = None                                                                                                                                             │     │
│ │  interrupt_after_ = []                                                                                                                                               │     │
│ │  interrupt_before = None                                                                                                                                             │     │
│ │ interrupt_before_ = []                                                                                                                                               │     │
│ │              loop = <langgraph.pregel.loop.SyncPregelLoop object at 0x123aeac50>                                                                                     │     │
│ │       output_keys = [                                                                                                                                                │     │
│ │                     │   'messages',                                                                                                                                  │     │
│ │                     │   'company_of_interest',                                                                                                                       │     │
│ │                     │   'trade_date',                                                                                                                                │     │
│ │                     │   'sender',                                                                                                                                    │     │
│ │                     │   'market_report',                                                                                                                             │     │
│ │                     │   'sentiment_report',                                                                                                                          │     │
│ │                     │   'news_report',                                                                                                                               │     │
│ │                     │   'fundamentals_report',                                                                                                                       │     │
│ │                     │   'macro_report',                                                                                                                              │     │
│ │                     │   'alternative_data_report',                                                                                                                   │     │
│ │                     │   ... +12                                                                                                                                      │     │
│ │                     ]                                                                                                                                                │     │
│ │       run_manager = <langchain_core.callbacks.manager.CallbackManagerForChainRun object at 0x123aeab30>                                                              │     │
│ │            runner = <langgraph.pregel.runner.PregelRunner object at 0x123aea920>                                                                                     │     │
│ │              self = <langgraph.graph.state.CompiledStateGraph object at 0x123ab1f90>                                                                                 │     │
│ │             store = None                                                                                                                                             │     │
│ │            stream = <langgraph.utils.queue.SyncQueue object at 0x123aeb220>                                                                                          │     │
│ │       stream_mode = 'values'                                                                                                                                         │     │
│ │      stream_modes = {'values'}                                                                                                                                       │     │
│ │         subgraphs = False                                                                                                                                            │     │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯     │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/langgraph/pregel/runner.py:161 in tick                                                              │
│                                                                                                                                                                              │
│   158 │   │   elif len(tasks) == 1 and timeout is None and get_waiter is None:                                                                                               │
│   159 │   │   │   t = tasks[0]                                                                                                                                               │
│   160 │   │   │   try:                                                                                                                                                       │
│ ❱ 161 │   │   │   │   run_with_retry(                                                                                                                                        │
│   162 │   │   │   │   │   t,                                                                                                                                                 │
│   163 │   │   │   │   │   retry_policy,                                                                                                                                      │
│   164 │   │   │   │   │   configurable={                                                                                                                                     │
│                                                                                                                                                                              │
│ ╭───────────────────────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────────────────────╮ │
│ │       futures = {}                                                                                                                                                       │ │
│ │    get_waiter = None                                                                                                                                                     │ │
│ │       reraise = True                                                                                                                                                     │ │
│ │  retry_policy = None                                                                                                                                                     │ │
│ │ schedule_task = <bound method SyncPregelLoop.accept_push of <langgraph.pregel.loop.SyncPregelLoop object at 0x123aeac50>>                                                │ │
│ │          self = <langgraph.pregel.runner.PregelRunner object at 0x123aea920>                                                                                             │ │
│ │             t = PregelExecutableTask(                                                                                                                                    │ │
│ │                 │   name='Macro Economist',                                                                                                                              │ │
│ │                 │   input={                                                                                                                                              │ │
│ │                 │   │   'messages': [HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')],               │ │
│ │                 │   │   'company_of_interest': 'AAPL',                                                                                                                   │ │
│ │                 │   │   'trade_date': '2025-11-16',                                                                                                                      │ │
│ │                 │   │   'market_report': '',                                                                                                                             │ │
│ │                 │   │   'sentiment_report': '',                                                                                                                          │ │
│ │                 │   │   'news_report': '',                                                                                                                               │ │
│ │                 │   │   'fundamentals_report': '',                                                                                                                       │ │
│ │                 │   │   'macro_report': '',                                                                                                                              │ │
│ │                 │   │   'alternative_data_report': '',                                                                                                                   │ │
│ │                 │   │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                                  │ │
│ │                 │   │   ... +8                                                                                                                                           │ │
│ │                 │   },                                                                                                                                                   │ │
│ │                 │   proc=<langgraph.utils.runnable.RunnableSeq object at 0x123aea9b0>,                                                                                   │ │
│ │                 │   writes=deque([('__error__', AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]),                                   │ │
│ │                 │   config={                                                                                                                                             │ │
│ │                 │   │   'recursion_limit': 100,                                                                                                                          │ │
│ │                 │   │   'metadata': {                                                                                                                                    │ │
│ │                 │   │   │   'langgraph_step': 1,                                                                                                                         │ │
│ │                 │   │   │   'langgraph_node': 'Macro Economist',                                                                                                         │ │
│ │                 │   │   │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                                        │ │
│ │                 │   │   │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                                      │ │
│ │                 │   │   │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08'                                                            │ │
│ │                 │   │   },                                                                                                                                               │ │
│ │                 │   │   'configurable': {                                                                                                                                │ │
│ │                 │   │   │   '__pregel_task_id': '42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                  │ │
│ │                 │   │   │   '__pregel_send': <built-in method extend of collections.deque object at 0x123c24520>,                                                        │ │
│ │                 │   │   │   '__pregel_read': functools.partial(<function local_read at 0x104a7e0e0>, {'messages': <langgraph.channels.binop.BinaryOperatorAggregate      │ │
│ │                 object at 0x123adeec0>, 'company_of_interest': <langgraph.channels.last_value.LastValue object at 0x123adf000>, 'trade_date':                            │ │
│ │                 <langgraph.channels.last_value.LastValue object at 0x123ae0300>, 'sender': <langgraph.channels.last_value.LastValue object at 0x123adef40>,              │ │
│ │                 'market_report': <langgraph.channels.last_value.LastValue object at 0x123add4c0>, 'sentiment_report': <langgraph.channels.last_value.LastValue object at │ │
│ │                 0x123adc5c0>, 'news_report': <langgraph.channels.last_value.LastValue object at 0x123ade0c0>, 'fundamentals_report':                                     │ │
│ │                 <langgraph.channels.last_value.LastValue object at 0x123adfc40>, 'macro_report': <langgraph.channels.last_value.LastValue object at 0x123adee40>,        │ │
│ │                 'alternative_data_report': <langgraph.channels.last_value.LastValue object at 0x123adf7c0>, 'investment_debate_state':                                   │ │
│ │                 <langgraph.channels.last_value.LastValue object at 0x123adf9c0>, 'investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adc8c0>,     │ │
│ │                 'trader_investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adf8c0>, 'risk_quant_report': <langgraph.channels.last_value.LastValue │ │
│ │                 object at 0x123c08fc0>, 'risk_metrics_json': <langgraph.channels.last_value.LastValue object at 0x123c08700>, 'execution_plan':                          │ │
│ │                 <langgraph.channels.last_value.LastValue object at 0x123c0b2c0>, 'risk_debate_state': <langgraph.channels.last_value.LastValue object at 0x123c09040>,   │ │
│ │                 'final_trade_decision': <langgraph.channels.last_value.LastValue object at 0x123c10b80>, 'compliance_report': <langgraph.channels.last_value.LastValue   │ │
│ │                 object at 0x123c10bc0>, 'compliance_status': <langgraph.channels.last_value.LastValue object at 0x123c10c00>, 'proposed_trade':                          │ │
│ │                 <langgraph.channels.last_value.LastValue object at 0x123c10c40>, 'cost_statistics': <langgraph.channels.last_value.LastValue object at 0x123c10c80>,     │ │
│ │                 '__start__': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10cc0>, 'branch:to:Macro Economist':                                     │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d00>, 'branch:to:Msg Clear Macro Economist':                                        │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d40>, 'branch:to:tools_macro': <langgraph.channels.ephemeral_value.EphemeralValue   │ │
│ │                 object at 0x123c10d80>, 'branch:to:Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10dc0>, 'branch:to:Msg Clear      │ │
│ │                 Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e00>, 'branch:to:tools_market':                                    │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e40>, 'branch:to:Social Analyst':                                                   │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e80>, 'branch:to:Msg Clear Social Analyst':                                         │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10ec0>, 'branch:to:tools_social': <langgraph.channels.ephemeral_value.EphemeralValue  │ │
│ │                 object at 0x123c10f00>, 'branch:to:News Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f40>, 'branch:to:Msg Clear News   │ │
│ │                 Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f80>, 'branch:to:tools_news':                                             │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10fc0>, 'branch:to:Fundamentals Analyst':                                             │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11000>, 'branch:to:Msg Clear Fundamentals Analyst':                                   │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11040>, 'branch:to:tools_fundamentals':                                               │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11080>, 'branch:to:Alternative Data Analyst':                                         │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c110c0>, 'branch:to:Msg Clear Alternative Data Analyst':                               │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11100>, 'branch:to:tools_alternative':                                                │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11140>, 'branch:to:Bull Researcher':                                                  │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11180>, 'branch:to:Bear Researcher':                                                  │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c111c0>, 'branch:to:Research Manager':                                                 │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11200>, 'branch:to:Trader': <langgraph.channels.ephemeral_value.EphemeralValue object │ │
│ │                 at 0x123c11240>, 'branch:to:Risk Quant Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11280>, 'branch:to:Risky Analyst':   │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c112c0>, 'branch:to:Neutral Analyst':                                                  │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11300>, 'branch:to:Safe Analyst': <langgraph.channels.ephemeral_value.EphemeralValue  │ │
│ │                 object at 0x123c11340>, 'branch:to:Risk Judge': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11380>, 'branch:to:Execution          │ │
│ │                 Strategist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c113c0>, 'branch:to:Compliance Officer':                                  │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11400>}, {}, PregelTaskWrites(path=('__pregel_pull', 'Macro Economist'), name='Macro  │ │
│ │                 Economist', writes=deque([('__error__', AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]),                           │ │
│ │                 triggers=('branch:to:Macro Economist',))),                                                                                                               │ │
│ │                 │   │   │   '__pregel_store': None,                                                                                                                      │ │
│ │                 │   │   │   '__pregel_checkpointer': None,                                                                                                               │ │
│ │                 │   │   │   'checkpoint_map': {'': '1f0c2acd-176c-6a18-8000-0f50a9acbb05'},                                                                              │ │
│ │                 │   │   │   'checkpoint_id': None,                                                                                                                       │ │
│ │                 │   │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                     │ │
│ │                 │   │   │   '__pregel_scratchpad': PregelScratchpad(                                                                                                     │ │
│ │                 │   │   │   │   call_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea680>,                                                            │ │
│ │                 │   │   │   │   interrupt_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea6b0>,                                                       │ │
│ │                 │   │   │   │   get_null_resume=<function _scratchpad.<locals>.get_null_resume at 0x123ad2680>,                                                          │ │
│ │                 │   │   │   │   resume=[],                                                                                                                               │ │
│ │                 │   │   │   │   subgraph_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea860>                                                         │ │
│ │                 │   │   │   ),                                                                                                                                           │ │
│ │                 │   │   │   '__pregel_previous': None                                                                                                                    │ │
│ │                 │   │   },                                                                                                                                               │ │
│ │                 │   │   'callbacks': <langchain_core.callbacks.manager.CallbackManager object at 0x123aea620>,                                                           │ │
│ │                 │   │   'run_name': 'Macro Economist'                                                                                                                    │ │
│ │                 │   },                                                                                                                                                   │ │
│ │                 │   triggers=('branch:to:Macro Economist',),                                                                                                             │ │
│ │                 │   retry_policy=(),                                                                                                                                     │ │
│ │                 │   cache_key=None,                                                                                                                                      │ │
│ │                 │   id='42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                                           │ │
│ │                 │   path=('__pregel_pull', 'Macro Economist'),                                                                                                           │ │
│ │                 │   scheduled=False,                                                                                                                                     │ │
│ │                 │   writers=[                                                                                                                                            │ │
│ │                 │   │   ChannelWrite<...,...>(tags=None, recurse=True, explode_args=False, func_accepts_config=True, func_accepts={},                                    │ │
│ │                 writes=(ChannelWriteTupleEntry(mapper=<function CompiledStateGraph.attach_node.<locals>._get_updates at 0x123a91900>, value=<object object at            │ │
│ │                 0x10130bd80>, static=None), ChannelWriteTupleEntry(mapper=<function _control_branch at 0x104adf880>, value=<object object at 0x10130bd80>, static=[]))), │ │
│ │                 │   │   _route(tags=None, recurse=True, explode_args=False, func_accepts_config=True, func_accepts={},                                                   │ │
│ │                 _is_channel_writer=[(ChannelWriteEntry(channel='branch:to:tools_macro', value=None, skip_none=False, mapper=None), 'tools_macro'),                       │ │
│ │                 (ChannelWriteEntry(channel='branch:to:Msg Clear Macro Economist', value=None, skip_none=False, mapper=None), 'Msg Clear Macro Economist')])              │ │
│ │                 │   ],                                                                                                                                                   │ │
│ │                 │   subgraphs=[]                                                                                                                                         │ │
│ │                 )                                                                                                                                                        │ │
│ │         tasks = (                                                                                                                                                        │ │
│ │                 │   PregelExecutableTask(                                                                                                                                │ │
│ │                 │   │   name='Macro Economist',                                                                                                                          │ │
│ │                 │   │   input={                                                                                                                                          │ │
│ │                 │   │   │   'messages': [HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')],           │ │
│ │                 │   │   │   'company_of_interest': 'AAPL',                                                                                                               │ │
│ │                 │   │   │   'trade_date': '2025-11-16',                                                                                                                  │ │
│ │                 │   │   │   'market_report': '',                                                                                                                         │ │
│ │                 │   │   │   'sentiment_report': '',                                                                                                                      │ │
│ │                 │   │   │   'news_report': '',                                                                                                                           │ │
│ │                 │   │   │   'fundamentals_report': '',                                                                                                                   │ │
│ │                 │   │   │   'macro_report': '',                                                                                                                          │ │
│ │                 │   │   │   'alternative_data_report': '',                                                                                                               │ │
│ │                 │   │   │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                              │ │
│ │                 │   │   │   ... +8                                                                                                                                       │ │
│ │                 │   │   },                                                                                                                                               │ │
│ │                 │   │   proc=<langgraph.utils.runnable.RunnableSeq object at 0x123aea9b0>,                                                                               │ │
│ │                 │   │   writes=deque([('__error__', AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]),                               │ │
│ │                 │   │   config={                                                                                                                                         │ │
│ │                 │   │   │   'recursion_limit': 100,                                                                                                                      │ │
│ │                 │   │   │   'metadata': {                                                                                                                                │ │
│ │                 │   │   │   │   'langgraph_step': 1,                                                                                                                     │ │
│ │                 │   │   │   │   'langgraph_node': 'Macro Economist',                                                                                                     │ │
│ │                 │   │   │   │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                                    │ │
│ │                 │   │   │   │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                                  │ │
│ │                 │   │   │   │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08'                                                        │ │
│ │                 │   │   │   },                                                                                                                                           │ │
│ │                 │   │   │   'configurable': {                                                                                                                            │ │
│ │                 │   │   │   │   '__pregel_task_id': '42d81dba-9acd-c425-a566-dee537a8ca08',                                                                              │ │
│ │                 │   │   │   │   '__pregel_send': <built-in method extend of collections.deque object at 0x123c24520>,                                                    │ │
│ │                 │   │   │   │   '__pregel_read': functools.partial(<function local_read at 0x104a7e0e0>, {'messages': <langgraph.channels.binop.BinaryOperatorAggregate  │ │
│ │                 object at 0x123adeec0>, 'company_of_interest': <langgraph.channels.last_value.LastValue object at 0x123adf000>, 'trade_date':                            │ │
│ │                 <langgraph.channels.last_value.LastValue object at 0x123ae0300>, 'sender': <langgraph.channels.last_value.LastValue object at 0x123adef40>,              │ │
│ │                 'market_report': <langgraph.channels.last_value.LastValue object at 0x123add4c0>, 'sentiment_report': <langgraph.channels.last_value.LastValue object at │ │
│ │                 0x123adc5c0>, 'news_report': <langgraph.channels.last_value.LastValue object at 0x123ade0c0>, 'fundamentals_report':                                     │ │
│ │                 <langgraph.channels.last_value.LastValue object at 0x123adfc40>, 'macro_report': <langgraph.channels.last_value.LastValue object at 0x123adee40>,        │ │
│ │                 'alternative_data_report': <langgraph.channels.last_value.LastValue object at 0x123adf7c0>, 'investment_debate_state':                                   │ │
│ │                 <langgraph.channels.last_value.LastValue object at 0x123adf9c0>, 'investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adc8c0>,     │ │
│ │                 'trader_investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adf8c0>, 'risk_quant_report': <langgraph.channels.last_value.LastValue │ │
│ │                 object at 0x123c08fc0>, 'risk_metrics_json': <langgraph.channels.last_value.LastValue object at 0x123c08700>, 'execution_plan':                          │ │
│ │                 <langgraph.channels.last_value.LastValue object at 0x123c0b2c0>, 'risk_debate_state': <langgraph.channels.last_value.LastValue object at 0x123c09040>,   │ │
│ │                 'final_trade_decision': <langgraph.channels.last_value.LastValue object at 0x123c10b80>, 'compliance_report': <langgraph.channels.last_value.LastValue   │ │
│ │                 object at 0x123c10bc0>, 'compliance_status': <langgraph.channels.last_value.LastValue object at 0x123c10c00>, 'proposed_trade':                          │ │
│ │                 <langgraph.channels.last_value.LastValue object at 0x123c10c40>, 'cost_statistics': <langgraph.channels.last_value.LastValue object at 0x123c10c80>,     │ │
│ │                 '__start__': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10cc0>, 'branch:to:Macro Economist':                                     │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d00>, 'branch:to:Msg Clear Macro Economist':                                        │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d40>, 'branch:to:tools_macro': <langgraph.channels.ephemeral_value.EphemeralValue   │ │
│ │                 object at 0x123c10d80>, 'branch:to:Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10dc0>, 'branch:to:Msg Clear      │ │
│ │                 Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e00>, 'branch:to:tools_market':                                    │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e40>, 'branch:to:Social Analyst':                                                   │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e80>, 'branch:to:Msg Clear Social Analyst':                                         │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10ec0>, 'branch:to:tools_social': <langgraph.channels.ephemeral_value.EphemeralValue  │ │
│ │                 object at 0x123c10f00>, 'branch:to:News Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f40>, 'branch:to:Msg Clear News   │ │
│ │                 Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f80>, 'branch:to:tools_news':                                             │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10fc0>, 'branch:to:Fundamentals Analyst':                                             │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11000>, 'branch:to:Msg Clear Fundamentals Analyst':                                   │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11040>, 'branch:to:tools_fundamentals':                                               │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11080>, 'branch:to:Alternative Data Analyst':                                         │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c110c0>, 'branch:to:Msg Clear Alternative Data Analyst':                               │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11100>, 'branch:to:tools_alternative':                                                │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11140>, 'branch:to:Bull Researcher':                                                  │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11180>, 'branch:to:Bear Researcher':                                                  │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c111c0>, 'branch:to:Research Manager':                                                 │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11200>, 'branch:to:Trader': <langgraph.channels.ephemeral_value.EphemeralValue object │ │
│ │                 at 0x123c11240>, 'branch:to:Risk Quant Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11280>, 'branch:to:Risky Analyst':   │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c112c0>, 'branch:to:Neutral Analyst':                                                  │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11300>, 'branch:to:Safe Analyst': <langgraph.channels.ephemeral_value.EphemeralValue  │ │
│ │                 object at 0x123c11340>, 'branch:to:Risk Judge': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11380>, 'branch:to:Execution          │ │
│ │                 Strategist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c113c0>, 'branch:to:Compliance Officer':                                  │ │
│ │                 <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11400>}, {}, PregelTaskWrites(path=('__pregel_pull', 'Macro Economist'), name='Macro  │ │
│ │                 Economist', writes=deque([('__error__', AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]),                           │ │
│ │                 triggers=('branch:to:Macro Economist',))),                                                                                                               │ │
│ │                 │   │   │   │   '__pregel_store': None,                                                                                                                  │ │
│ │                 │   │   │   │   '__pregel_checkpointer': None,                                                                                                           │ │
│ │                 │   │   │   │   'checkpoint_map': {'': '1f0c2acd-176c-6a18-8000-0f50a9acbb05'},                                                                          │ │
│ │                 │   │   │   │   'checkpoint_id': None,                                                                                                                   │ │
│ │                 │   │   │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                 │ │
│ │                 │   │   │   │   '__pregel_scratchpad': PregelScratchpad(                                                                                                 │ │
│ │                 │   │   │   │   │   call_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea680>,                                                        │ │
│ │                 │   │   │   │   │   interrupt_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea6b0>,                                                   │ │
│ │                 │   │   │   │   │   get_null_resume=<function _scratchpad.<locals>.get_null_resume at 0x123ad2680>,                                                      │ │
│ │                 │   │   │   │   │   resume=[],                                                                                                                           │ │
│ │                 │   │   │   │   │   subgraph_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea860>                                                     │ │
│ │                 │   │   │   │   ),                                                                                                                                       │ │
│ │                 │   │   │   │   '__pregel_previous': None                                                                                                                │ │
│ │                 │   │   │   },                                                                                                                                           │ │
│ │                 │   │   │   'callbacks': <langchain_core.callbacks.manager.CallbackManager object at 0x123aea620>,                                                       │ │
│ │                 │   │   │   'run_name': 'Macro Economist'                                                                                                                │ │
│ │                 │   │   },                                                                                                                                               │ │
│ │                 │   │   triggers=('branch:to:Macro Economist',),                                                                                                         │ │
│ │                 │   │   retry_policy=(),                                                                                                                                 │ │
│ │                 │   │   cache_key=None,                                                                                                                                  │ │
│ │                 │   │   id='42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                                       │ │
│ │                 │   │   path=('__pregel_pull', 'Macro Economist'),                                                                                                       │ │
│ │                 │   │   scheduled=False,                                                                                                                                 │ │
│ │                 │   │   writers=[                                                                                                                                        │ │
│ │                 │   │   │   ChannelWrite<...,...>(tags=None, recurse=True, explode_args=False, func_accepts_config=True, func_accepts={},                                │ │
│ │                 writes=(ChannelWriteTupleEntry(mapper=<function CompiledStateGraph.attach_node.<locals>._get_updates at 0x123a91900>, value=<object object at            │ │
│ │                 0x10130bd80>, static=None), ChannelWriteTupleEntry(mapper=<function _control_branch at 0x104adf880>, value=<object object at 0x10130bd80>, static=[]))), │ │
│ │                 │   │   │   _route(tags=None, recurse=True, explode_args=False, func_accepts_config=True, func_accepts={},                                               │ │
│ │                 _is_channel_writer=[(ChannelWriteEntry(channel='branch:to:tools_macro', value=None, skip_none=False, mapper=None), 'tools_macro'),                       │ │
│ │                 (ChannelWriteEntry(channel='branch:to:Msg Clear Macro Economist', value=None, skip_none=False, mapper=None), 'Msg Clear Macro Economist')])              │ │
│ │                 │   │   ],                                                                                                                                               │ │
│ │                 │   │   subgraphs=[]                                                                                                                                     │ │
│ │                 │   ),                                                                                                                                                   │ │
│ │                 )                                                                                                                                                        │ │
│ │            tb = <traceback object at 0x123a752c0>                                                                                                                        │ │
│ │       timeout = None                                                                                                                                                     │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/langgraph/pregel/retry.py:40 in run_with_retry                                                      │
│                                                                                                                                                                              │
│    37 │   │   │   # clear any writes from previous attempts                                                                                                                  │
│    38 │   │   │   task.writes.clear()                                                                                                                                        │
│    39 │   │   │   # run the task                                                                                                                                             │
│ ❱  40 │   │   │   return task.proc.invoke(task.input, config)                                                                                                                │
│    41 │   │   except ParentCommand as exc:                                                                                                                                   │
│    42 │   │   │   ns: str = config[CONF][CONFIG_KEY_CHECKPOINT_NS]                                                                                                           │
│    43 │   │   │   cmd = exc.args[0]                                                                                                                                          │
│                                                                                                                                                                              │
│ ╭───────────────────────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────────────────────╮ │
│ │     attempts = 0                                                                                                                                                         │ │
│ │       config = {                                                                                                                                                         │ │
│ │                │   'recursion_limit': 100,                                                                                                                               │ │
│ │                │   'metadata': {                                                                                                                                         │ │
│ │                │   │   'langgraph_step': 1,                                                                                                                              │ │
│ │                │   │   'langgraph_node': 'Macro Economist',                                                                                                              │ │
│ │                │   │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                                             │ │
│ │                │   │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                                           │ │
│ │                │   │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08'                                                                 │ │
│ │                │   },                                                                                                                                                    │ │
│ │                │   'configurable': {                                                                                                                                     │ │
│ │                │   │   '__pregel_task_id': '42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                       │ │
│ │                │   │   '__pregel_send': <built-in method extend of collections.deque object at 0x123c24520>,                                                             │ │
│ │                │   │   '__pregel_read': functools.partial(<function local_read at 0x104a7e0e0>, {'messages': <langgraph.channels.binop.BinaryOperatorAggregate object at │ │
│ │                0x123adeec0>, 'company_of_interest': <langgraph.channels.last_value.LastValue object at 0x123adf000>, 'trade_date':                                       │ │
│ │                <langgraph.channels.last_value.LastValue object at 0x123ae0300>, 'sender': <langgraph.channels.last_value.LastValue object at 0x123adef40>,               │ │
│ │                'market_report': <langgraph.channels.last_value.LastValue object at 0x123add4c0>, 'sentiment_report': <langgraph.channels.last_value.LastValue object at  │ │
│ │                0x123adc5c0>, 'news_report': <langgraph.channels.last_value.LastValue object at 0x123ade0c0>, 'fundamentals_report':                                      │ │
│ │                <langgraph.channels.last_value.LastValue object at 0x123adfc40>, 'macro_report': <langgraph.channels.last_value.LastValue object at 0x123adee40>,         │ │
│ │                'alternative_data_report': <langgraph.channels.last_value.LastValue object at 0x123adf7c0>, 'investment_debate_state':                                    │ │
│ │                <langgraph.channels.last_value.LastValue object at 0x123adf9c0>, 'investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adc8c0>,      │ │
│ │                'trader_investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adf8c0>, 'risk_quant_report': <langgraph.channels.last_value.LastValue  │ │
│ │                object at 0x123c08fc0>, 'risk_metrics_json': <langgraph.channels.last_value.LastValue object at 0x123c08700>, 'execution_plan':                           │ │
│ │                <langgraph.channels.last_value.LastValue object at 0x123c0b2c0>, 'risk_debate_state': <langgraph.channels.last_value.LastValue object at 0x123c09040>,    │ │
│ │                'final_trade_decision': <langgraph.channels.last_value.LastValue object at 0x123c10b80>, 'compliance_report': <langgraph.channels.last_value.LastValue    │ │
│ │                object at 0x123c10bc0>, 'compliance_status': <langgraph.channels.last_value.LastValue object at 0x123c10c00>, 'proposed_trade':                           │ │
│ │                <langgraph.channels.last_value.LastValue object at 0x123c10c40>, 'cost_statistics': <langgraph.channels.last_value.LastValue object at 0x123c10c80>,      │ │
│ │                '__start__': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10cc0>, 'branch:to:Macro Economist':                                      │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d00>, 'branch:to:Msg Clear Macro Economist':                                         │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d40>, 'branch:to:tools_macro': <langgraph.channels.ephemeral_value.EphemeralValue    │ │
│ │                object at 0x123c10d80>, 'branch:to:Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10dc0>, 'branch:to:Msg Clear       │ │
│ │                Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e00>, 'branch:to:tools_market':                                     │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e40>, 'branch:to:Social Analyst': <langgraph.channels.ephemeral_value.EphemeralValue │ │
│ │                object at 0x123c10e80>, 'branch:to:Msg Clear Social Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10ec0>,                  │ │
│ │                'branch:to:tools_social': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f00>, 'branch:to:News Analyst':                            │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f40>, 'branch:to:Msg Clear News Analyst':                                            │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f80>, 'branch:to:tools_news': <langgraph.channels.ephemeral_value.EphemeralValue     │ │
│ │                object at 0x123c10fc0>, 'branch:to:Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11000>, 'branch:to:Msg Clear │ │
│ │                Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11040>, 'branch:to:tools_fundamentals':                         │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11080>, 'branch:to:Alternative Data Analyst':                                          │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c110c0>, 'branch:to:Msg Clear Alternative Data Analyst':                                │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11100>, 'branch:to:tools_alternative':                                                 │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11140>, 'branch:to:Bull Researcher':                                                   │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11180>, 'branch:to:Bear Researcher':                                                   │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c111c0>, 'branch:to:Research Manager':                                                  │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11200>, 'branch:to:Trader': <langgraph.channels.ephemeral_value.EphemeralValue object  │ │
│ │                at 0x123c11240>, 'branch:to:Risk Quant Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11280>, 'branch:to:Risky Analyst':    │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c112c0>, 'branch:to:Neutral Analyst':                                                   │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11300>, 'branch:to:Safe Analyst': <langgraph.channels.ephemeral_value.EphemeralValue   │ │
│ │                object at 0x123c11340>, 'branch:to:Risk Judge': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11380>, 'branch:to:Execution           │ │
│ │                Strategist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c113c0>, 'branch:to:Compliance Officer':                                   │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11400>}, {}, PregelTaskWrites(path=('__pregel_pull', 'Macro Economist'), name='Macro   │ │
│ │                Economist', writes=deque([('__error__', AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]), triggers=('branch:to:Macro │ │
│ │                Economist',))),                                                                                                                                           │ │
│ │                │   │   '__pregel_store': None,                                                                                                                           │ │
│ │                │   │   '__pregel_checkpointer': None,                                                                                                                    │ │
│ │                │   │   'checkpoint_map': {'': '1f0c2acd-176c-6a18-8000-0f50a9acbb05'},                                                                                   │ │
│ │                │   │   'checkpoint_id': None,                                                                                                                            │ │
│ │                │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                          │ │
│ │                │   │   '__pregel_scratchpad': PregelScratchpad(                                                                                                          │ │
│ │                │   │   │   call_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea680>,                                                                 │ │
│ │                │   │   │   interrupt_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea6b0>,                                                            │ │
│ │                │   │   │   get_null_resume=<function _scratchpad.<locals>.get_null_resume at 0x123ad2680>,                                                               │ │
│ │                │   │   │   resume=[],                                                                                                                                    │ │
│ │                │   │   │   subgraph_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea860>                                                              │ │
│ │                │   │   ),                                                                                                                                                │ │
│ │                │   │   '__pregel_previous': None,                                                                                                                        │ │
│ │                │   │   ... +1                                                                                                                                            │ │
│ │                │   },                                                                                                                                                    │ │
│ │                │   'callbacks': <langchain_core.callbacks.manager.CallbackManager object at 0x123aea620>,                                                                │ │
│ │                │   'run_name': 'Macro Economist'                                                                                                                         │ │
│ │                }                                                                                                                                                         │ │
│ │ configurable = {                                                                                                                                                         │ │
│ │                │   '__pregel_call': functools.partial(<function _call at 0x104ab0ee0>, <weakref at 0x123af9c60; to 'PregelExecutableTask' at 0x123aea6e0>, retry=None,   │ │
│ │                futures=<weakref at 0x123afbf10; to 'FuturesDict' at 0x123af98a0>, schedule_task=<bound method SyncPregelLoop.accept_push of                              │ │
│ │                <langgraph.pregel.loop.SyncPregelLoop object at 0x123aeac50>>, submit=<weakref at 0x123acd690; to 'BackgroundExecutor' at 0x123aeb9a0>)                   │ │
│ │                }                                                                                                                                                         │ │
│ │ retry_policy = None                                                                                                                                                      │ │
│ │         task = PregelExecutableTask(                                                                                                                                     │ │
│ │                │   name='Macro Economist',                                                                                                                               │ │
│ │                │   input={                                                                                                                                               │ │
│ │                │   │   'messages': [HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')],                │ │
│ │                │   │   'company_of_interest': 'AAPL',                                                                                                                    │ │
│ │                │   │   'trade_date': '2025-11-16',                                                                                                                       │ │
│ │                │   │   'market_report': '',                                                                                                                              │ │
│ │                │   │   'sentiment_report': '',                                                                                                                           │ │
│ │                │   │   'news_report': '',                                                                                                                                │ │
│ │                │   │   'fundamentals_report': '',                                                                                                                        │ │
│ │                │   │   'macro_report': '',                                                                                                                               │ │
│ │                │   │   'alternative_data_report': '',                                                                                                                    │ │
│ │                │   │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                                   │ │
│ │                │   │   ... +8                                                                                                                                            │ │
│ │                │   },                                                                                                                                                    │ │
│ │                │   proc=<langgraph.utils.runnable.RunnableSeq object at 0x123aea9b0>,                                                                                    │ │
│ │                │   writes=deque([('__error__', AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]),                                    │ │
│ │                │   config={                                                                                                                                              │ │
│ │                │   │   'recursion_limit': 100,                                                                                                                           │ │
│ │                │   │   'metadata': {                                                                                                                                     │ │
│ │                │   │   │   'langgraph_step': 1,                                                                                                                          │ │
│ │                │   │   │   'langgraph_node': 'Macro Economist',                                                                                                          │ │
│ │                │   │   │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                                         │ │
│ │                │   │   │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                                       │ │
│ │                │   │   │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08'                                                             │ │
│ │                │   │   },                                                                                                                                                │ │
│ │                │   │   'configurable': {                                                                                                                                 │ │
│ │                │   │   │   '__pregel_task_id': '42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                   │ │
│ │                │   │   │   '__pregel_send': <built-in method extend of collections.deque object at 0x123c24520>,                                                         │ │
│ │                │   │   │   '__pregel_read': functools.partial(<function local_read at 0x104a7e0e0>, {'messages': <langgraph.channels.binop.BinaryOperatorAggregate       │ │
│ │                object at 0x123adeec0>, 'company_of_interest': <langgraph.channels.last_value.LastValue object at 0x123adf000>, 'trade_date':                             │ │
│ │                <langgraph.channels.last_value.LastValue object at 0x123ae0300>, 'sender': <langgraph.channels.last_value.LastValue object at 0x123adef40>,               │ │
│ │                'market_report': <langgraph.channels.last_value.LastValue object at 0x123add4c0>, 'sentiment_report': <langgraph.channels.last_value.LastValue object at  │ │
│ │                0x123adc5c0>, 'news_report': <langgraph.channels.last_value.LastValue object at 0x123ade0c0>, 'fundamentals_report':                                      │ │
│ │                <langgraph.channels.last_value.LastValue object at 0x123adfc40>, 'macro_report': <langgraph.channels.last_value.LastValue object at 0x123adee40>,         │ │
│ │                'alternative_data_report': <langgraph.channels.last_value.LastValue object at 0x123adf7c0>, 'investment_debate_state':                                    │ │
│ │                <langgraph.channels.last_value.LastValue object at 0x123adf9c0>, 'investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adc8c0>,      │ │
│ │                'trader_investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adf8c0>, 'risk_quant_report': <langgraph.channels.last_value.LastValue  │ │
│ │                object at 0x123c08fc0>, 'risk_metrics_json': <langgraph.channels.last_value.LastValue object at 0x123c08700>, 'execution_plan':                           │ │
│ │                <langgraph.channels.last_value.LastValue object at 0x123c0b2c0>, 'risk_debate_state': <langgraph.channels.last_value.LastValue object at 0x123c09040>,    │ │
│ │                'final_trade_decision': <langgraph.channels.last_value.LastValue object at 0x123c10b80>, 'compliance_report': <langgraph.channels.last_value.LastValue    │ │
│ │                object at 0x123c10bc0>, 'compliance_status': <langgraph.channels.last_value.LastValue object at 0x123c10c00>, 'proposed_trade':                           │ │
│ │                <langgraph.channels.last_value.LastValue object at 0x123c10c40>, 'cost_statistics': <langgraph.channels.last_value.LastValue object at 0x123c10c80>,      │ │
│ │                '__start__': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10cc0>, 'branch:to:Macro Economist':                                      │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d00>, 'branch:to:Msg Clear Macro Economist':                                         │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d40>, 'branch:to:tools_macro': <langgraph.channels.ephemeral_value.EphemeralValue    │ │
│ │                object at 0x123c10d80>, 'branch:to:Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10dc0>, 'branch:to:Msg Clear       │ │
│ │                Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e00>, 'branch:to:tools_market':                                     │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e40>, 'branch:to:Social Analyst': <langgraph.channels.ephemeral_value.EphemeralValue │ │
│ │                object at 0x123c10e80>, 'branch:to:Msg Clear Social Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10ec0>,                  │ │
│ │                'branch:to:tools_social': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f00>, 'branch:to:News Analyst':                            │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f40>, 'branch:to:Msg Clear News Analyst':                                            │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f80>, 'branch:to:tools_news': <langgraph.channels.ephemeral_value.EphemeralValue     │ │
│ │                object at 0x123c10fc0>, 'branch:to:Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11000>, 'branch:to:Msg Clear │ │
│ │                Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11040>, 'branch:to:tools_fundamentals':                         │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11080>, 'branch:to:Alternative Data Analyst':                                          │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c110c0>, 'branch:to:Msg Clear Alternative Data Analyst':                                │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11100>, 'branch:to:tools_alternative':                                                 │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11140>, 'branch:to:Bull Researcher':                                                   │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11180>, 'branch:to:Bear Researcher':                                                   │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c111c0>, 'branch:to:Research Manager':                                                  │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11200>, 'branch:to:Trader': <langgraph.channels.ephemeral_value.EphemeralValue object  │ │
│ │                at 0x123c11240>, 'branch:to:Risk Quant Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11280>, 'branch:to:Risky Analyst':    │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c112c0>, 'branch:to:Neutral Analyst':                                                   │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11300>, 'branch:to:Safe Analyst': <langgraph.channels.ephemeral_value.EphemeralValue   │ │
│ │                object at 0x123c11340>, 'branch:to:Risk Judge': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11380>, 'branch:to:Execution           │ │
│ │                Strategist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c113c0>, 'branch:to:Compliance Officer':                                   │ │
│ │                <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11400>}, {}, PregelTaskWrites(path=('__pregel_pull', 'Macro Economist'), name='Macro   │ │
│ │                Economist', writes=deque([('__error__', AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]), triggers=('branch:to:Macro │ │
│ │                Economist',))),                                                                                                                                           │ │
│ │                │   │   │   '__pregel_store': None,                                                                                                                       │ │
│ │                │   │   │   '__pregel_checkpointer': None,                                                                                                                │ │
│ │                │   │   │   'checkpoint_map': {'': '1f0c2acd-176c-6a18-8000-0f50a9acbb05'},                                                                               │ │
│ │                │   │   │   'checkpoint_id': None,                                                                                                                        │ │
│ │                │   │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                      │ │
│ │                │   │   │   '__pregel_scratchpad': PregelScratchpad(                                                                                                      │ │
│ │                │   │   │   │   call_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea680>,                                                             │ │
│ │                │   │   │   │   interrupt_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea6b0>,                                                        │ │
│ │                │   │   │   │   get_null_resume=<function _scratchpad.<locals>.get_null_resume at 0x123ad2680>,                                                           │ │
│ │                │   │   │   │   resume=[],                                                                                                                                │ │
│ │                │   │   │   │   subgraph_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea860>                                                          │ │
│ │                │   │   │   ),                                                                                                                                            │ │
│ │                │   │   │   '__pregel_previous': None                                                                                                                     │ │
│ │                │   │   },                                                                                                                                                │ │
│ │                │   │   'callbacks': <langchain_core.callbacks.manager.CallbackManager object at 0x123aea620>,                                                            │ │
│ │                │   │   'run_name': 'Macro Economist'                                                                                                                     │ │
│ │                │   },                                                                                                                                                    │ │
│ │                │   triggers=('branch:to:Macro Economist',),                                                                                                              │ │
│ │                │   retry_policy=(),                                                                                                                                      │ │
│ │                │   cache_key=None,                                                                                                                                       │ │
│ │                │   id='42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                                            │ │
│ │                │   path=('__pregel_pull', 'Macro Economist'),                                                                                                            │ │
│ │                │   scheduled=False,                                                                                                                                      │ │
│ │                │   writers=[                                                                                                                                             │ │
│ │                │   │   ChannelWrite<...,...>(tags=None, recurse=True, explode_args=False, func_accepts_config=True, func_accepts={},                                     │ │
│ │                writes=(ChannelWriteTupleEntry(mapper=<function CompiledStateGraph.attach_node.<locals>._get_updates at 0x123a91900>, value=<object object at             │ │
│ │                0x10130bd80>, static=None), ChannelWriteTupleEntry(mapper=<function _control_branch at 0x104adf880>, value=<object object at 0x10130bd80>, static=[]))),  │ │
│ │                │   │   _route(tags=None, recurse=True, explode_args=False, func_accepts_config=True, func_accepts={},                                                    │ │
│ │                _is_channel_writer=[(ChannelWriteEntry(channel='branch:to:tools_macro', value=None, skip_none=False, mapper=None), 'tools_macro'),                        │ │
│ │                (ChannelWriteEntry(channel='branch:to:Msg Clear Macro Economist', value=None, skip_none=False, mapper=None), 'Msg Clear Macro Economist')])               │ │
│ │                │   ],                                                                                                                                                    │ │
│ │                │   subgraphs=[]                                                                                                                                          │ │
│ │                )                                                                                                                                                         │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/langgraph/utils/runnable.py:623 in invoke                                                           │
│                                                                                                                                                                              │
│   620 │   │   │   │   │   │   run = None                                                                                                                                     │
│   621 │   │   │   │   │   # run in context                                                                                                                                   │
│   622 │   │   │   │   │   with set_config_context(config, run) as context:                                                                                                   │
│ ❱ 623 │   │   │   │   │   │   input = context.run(step.invoke, input, config, **kwargs)                                                                                      │
│   624 │   │   │   │   else:                                                                                                                                                  │
│   625 │   │   │   │   │   input = step.invoke(input, config)                                                                                                                 │
│   626 │   │   # finish the root run                                                                                                                                          │
│                                                                                                                                                                              │
│ ╭───────────────────────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────────────────────╮ │
│ │ callback_manager = <langchain_core.callbacks.manager.CallbackManager object at 0x123aea620>                                                                              │ │
│ │           config = {                                                                                                                                                     │ │
│ │                    │   'recursion_limit': 100,                                                                                                                           │ │
│ │                    │   'metadata': {                                                                                                                                     │ │
│ │                    │   │   'langgraph_step': 1,                                                                                                                          │ │
│ │                    │   │   'langgraph_node': 'Macro Economist',                                                                                                          │ │
│ │                    │   │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                                         │ │
│ │                    │   │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                                       │ │
│ │                    │   │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08'                                                             │ │
│ │                    │   },                                                                                                                                                │ │
│ │                    │   'configurable': {                                                                                                                                 │ │
│ │                    │   │   '__pregel_task_id': '42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                   │ │
│ │                    │   │   '__pregel_send': <built-in method extend of collections.deque object at 0x123c24520>,                                                         │ │
│ │                    │   │   '__pregel_read': functools.partial(<function local_read at 0x104a7e0e0>, {'messages': <langgraph.channels.binop.BinaryOperatorAggregate       │ │
│ │                    object at 0x123adeec0>, 'company_of_interest': <langgraph.channels.last_value.LastValue object at 0x123adf000>, 'trade_date':                         │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123ae0300>, 'sender': <langgraph.channels.last_value.LastValue object at 0x123adef40>,           │ │
│ │                    'market_report': <langgraph.channels.last_value.LastValue object at 0x123add4c0>, 'sentiment_report': <langgraph.channels.last_value.LastValue object │ │
│ │                    at 0x123adc5c0>, 'news_report': <langgraph.channels.last_value.LastValue object at 0x123ade0c0>, 'fundamentals_report':                               │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123adfc40>, 'macro_report': <langgraph.channels.last_value.LastValue object at 0x123adee40>,     │ │
│ │                    'alternative_data_report': <langgraph.channels.last_value.LastValue object at 0x123adf7c0>, 'investment_debate_state':                                │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123adf9c0>, 'investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adc8c0>,  │ │
│ │                    'trader_investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adf8c0>, 'risk_quant_report':                                       │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123c08fc0>, 'risk_metrics_json': <langgraph.channels.last_value.LastValue object at              │ │
│ │                    0x123c08700>, 'execution_plan': <langgraph.channels.last_value.LastValue object at 0x123c0b2c0>, 'risk_debate_state':                                 │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123c09040>, 'final_trade_decision': <langgraph.channels.last_value.LastValue object at           │ │
│ │                    0x123c10b80>, 'compliance_report': <langgraph.channels.last_value.LastValue object at 0x123c10bc0>, 'compliance_status':                              │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123c10c00>, 'proposed_trade': <langgraph.channels.last_value.LastValue object at 0x123c10c40>,   │ │
│ │                    'cost_statistics': <langgraph.channels.last_value.LastValue object at 0x123c10c80>, '__start__': <langgraph.channels.ephemeral_value.EphemeralValue   │ │
│ │                    object at 0x123c10cc0>, 'branch:to:Macro Economist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d00>, 'branch:to:Msg Clear  │ │
│ │                    Macro Economist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d40>, 'branch:to:tools_macro':                                 │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d80>, 'branch:to:Market Analyst':                                                │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10dc0>, 'branch:to:Msg Clear Market Analyst':                                      │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e00>, 'branch:to:tools_market':                                                  │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e40>, 'branch:to:Social Analyst':                                                │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e80>, 'branch:to:Msg Clear Social Analyst':                                      │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10ec0>, 'branch:to:tools_social':                                                  │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f00>, 'branch:to:News Analyst':                                                  │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f40>, 'branch:to:Msg Clear News Analyst':                                        │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f80>, 'branch:to:tools_news': <langgraph.channels.ephemeral_value.EphemeralValue │ │
│ │                    object at 0x123c10fc0>, 'branch:to:Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11000>, 'branch:to:Msg   │ │
│ │                    Clear Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11040>, 'branch:to:tools_fundamentals':               │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11080>, 'branch:to:Alternative Data Analyst':                                      │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c110c0>, 'branch:to:Msg Clear Alternative Data Analyst':                            │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11100>, 'branch:to:tools_alternative':                                             │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11140>, 'branch:to:Bull Researcher':                                               │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11180>, 'branch:to:Bear Researcher':                                               │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c111c0>, 'branch:to:Research Manager':                                              │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11200>, 'branch:to:Trader': <langgraph.channels.ephemeral_value.EphemeralValue     │ │
│ │                    object at 0x123c11240>, 'branch:to:Risk Quant Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11280>, 'branch:to:Risky   │ │
│ │                    Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c112c0>, 'branch:to:Neutral Analyst':                                     │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11300>, 'branch:to:Safe Analyst':                                                  │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11340>, 'branch:to:Risk Judge': <langgraph.channels.ephemeral_value.EphemeralValue │ │
│ │                    object at 0x123c11380>, 'branch:to:Execution Strategist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c113c0>,                  │ │
│ │                    'branch:to:Compliance Officer': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11400>}, {},                                       │ │
│ │                    PregelTaskWrites(path=('__pregel_pull', 'Macro Economist'), name='Macro Economist', writes=deque([('__error__',                                       │ │
│ │                    AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]), triggers=('branch:to:Macro Economist',))),                     │ │
│ │                    │   │   '__pregel_store': None,                                                                                                                       │ │
│ │                    │   │   '__pregel_checkpointer': None,                                                                                                                │ │
│ │                    │   │   'checkpoint_map': {'': '1f0c2acd-176c-6a18-8000-0f50a9acbb05'},                                                                               │ │
│ │                    │   │   'checkpoint_id': None,                                                                                                                        │ │
│ │                    │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                      │ │
│ │                    │   │   '__pregel_scratchpad': PregelScratchpad(                                                                                                      │ │
│ │                    │   │   │   call_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea680>,                                                             │ │
│ │                    │   │   │   interrupt_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea6b0>,                                                        │ │
│ │                    │   │   │   get_null_resume=<function _scratchpad.<locals>.get_null_resume at 0x123ad2680>,                                                           │ │
│ │                    │   │   │   resume=[],                                                                                                                                │ │
│ │                    │   │   │   subgraph_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea860>                                                          │ │
│ │                    │   │   ),                                                                                                                                            │ │
│ │                    │   │   '__pregel_previous': None,                                                                                                                    │ │
│ │                    │   │   ... +1                                                                                                                                        │ │
│ │                    │   },                                                                                                                                                │ │
│ │                    │   'callbacks': <langchain_core.callbacks.manager.CallbackManager object at 0x123aeb1c0>                                                             │ │
│ │                    }                                                                                                                                                     │ │
│ │          context = <_contextvars.Context object at 0x122cb87c0>                                                                                                          │ │
│ │                i = 0                                                                                                                                                     │ │
│ │            input = {                                                                                                                                                     │ │
│ │                    │   'messages': [HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')],                │ │
│ │                    │   'company_of_interest': 'AAPL',                                                                                                                    │ │
│ │                    │   'trade_date': '2025-11-16',                                                                                                                       │ │
│ │                    │   'market_report': '',                                                                                                                              │ │
│ │                    │   'sentiment_report': '',                                                                                                                           │ │
│ │                    │   'news_report': '',                                                                                                                                │ │
│ │                    │   'fundamentals_report': '',                                                                                                                        │ │
│ │                    │   'macro_report': '',                                                                                                                               │ │
│ │                    │   'alternative_data_report': '',                                                                                                                    │ │
│ │                    │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                                   │ │
│ │                    │   ... +8                                                                                                                                            │ │
│ │                    }                                                                                                                                                     │ │
│ │           kwargs = {}                                                                                                                                                    │ │
│ │              run = None                                                                                                                                                  │ │
│ │      run_manager = <langchain_core.callbacks.manager.CallbackManagerForChainRun object at 0x123aeadd0>                                                                   │ │
│ │             self = <langgraph.utils.runnable.RunnableSeq object at 0x123aea9b0>                                                                                          │ │
│ │             step = Macro Economist(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})                                              │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/langgraph/utils/runnable.py:377 in invoke                                                           │
│                                                                                                                                                                              │
│   374 │   │   │   else:                                                                                                                                                      │
│   375 │   │   │   │   run_manager.on_chain_end(ret)                                                                                                                          │
│   376 │   │   else:                                                                                                                                                          │
│ ❱ 377 │   │   │   ret = self.func(*args, **kwargs)                                                                                                                           │
│   378 │   │   if self.recurse and isinstance(ret, Runnable):                                                                                                                 │
│   379 │   │   │   return ret.invoke(input, config)                                                                                                                           │
│   380 │   │   return ret                                                                                                                                                     │
│                                                                                                                                                                              │
│ ╭───────────────────────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────────────────────╮ │
│ │  _conf = {                                                                                                                                                               │ │
│ │          │   '__pregel_task_id': '42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                                 │ │
│ │          │   '__pregel_send': <built-in method extend of collections.deque object at 0x123c24520>,                                                                       │ │
│ │          │   '__pregel_read': functools.partial(<function local_read at 0x104a7e0e0>, {'messages': <langgraph.channels.binop.BinaryOperatorAggregate object at           │ │
│ │          0x123adeec0>, 'company_of_interest': <langgraph.channels.last_value.LastValue object at 0x123adf000>, 'trade_date': <langgraph.channels.last_value.LastValue    │ │
│ │          object at 0x123ae0300>, 'sender': <langgraph.channels.last_value.LastValue object at 0x123adef40>, 'market_report': <langgraph.channels.last_value.LastValue    │ │
│ │          object at 0x123add4c0>, 'sentiment_report': <langgraph.channels.last_value.LastValue object at 0x123adc5c0>, 'news_report':                                     │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123ade0c0>, 'fundamentals_report': <langgraph.channels.last_value.LastValue object at 0x123adfc40>,        │ │
│ │          'macro_report': <langgraph.channels.last_value.LastValue object at 0x123adee40>, 'alternative_data_report': <langgraph.channels.last_value.LastValue object at  │ │
│ │          0x123adf7c0>, 'investment_debate_state': <langgraph.channels.last_value.LastValue object at 0x123adf9c0>, 'investment_plan':                                    │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123adc8c0>, 'trader_investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adf8c0>,     │ │
│ │          'risk_quant_report': <langgraph.channels.last_value.LastValue object at 0x123c08fc0>, 'risk_metrics_json': <langgraph.channels.last_value.LastValue object at   │ │
│ │          0x123c08700>, 'execution_plan': <langgraph.channels.last_value.LastValue object at 0x123c0b2c0>, 'risk_debate_state': <langgraph.channels.last_value.LastValue  │ │
│ │          object at 0x123c09040>, 'final_trade_decision': <langgraph.channels.last_value.LastValue object at 0x123c10b80>, 'compliance_report':                           │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123c10bc0>, 'compliance_status': <langgraph.channels.last_value.LastValue object at 0x123c10c00>,          │ │
│ │          'proposed_trade': <langgraph.channels.last_value.LastValue object at 0x123c10c40>, 'cost_statistics': <langgraph.channels.last_value.LastValue object at        │ │
│ │          0x123c10c80>, '__start__': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10cc0>, 'branch:to:Macro Economist':                              │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d00>, 'branch:to:Msg Clear Macro Economist':                                               │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d40>, 'branch:to:tools_macro': <langgraph.channels.ephemeral_value.EphemeralValue object   │ │
│ │          at 0x123c10d80>, 'branch:to:Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10dc0>, 'branch:to:Msg Clear Market Analyst':   │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e00>, 'branch:to:tools_market': <langgraph.channels.ephemeral_value.EphemeralValue object  │ │
│ │          at 0x123c10e40>, 'branch:to:Social Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e80>, 'branch:to:Msg Clear Social Analyst':   │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10ec0>, 'branch:to:tools_social': <langgraph.channels.ephemeral_value.EphemeralValue object  │ │
│ │          at 0x123c10f00>, 'branch:to:News Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f40>, 'branch:to:Msg Clear News Analyst':       │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f80>, 'branch:to:tools_news': <langgraph.channels.ephemeral_value.EphemeralValue object at │ │
│ │          0x123c10fc0>, 'branch:to:Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11000>, 'branch:to:Msg Clear Fundamentals    │ │
│ │          Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11040>, 'branch:to:tools_fundamentals':                                            │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11080>, 'branch:to:Alternative Data Analyst':                                                │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c110c0>, 'branch:to:Msg Clear Alternative Data Analyst':                                      │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11100>, 'branch:to:tools_alternative': <langgraph.channels.ephemeral_value.EphemeralValue    │ │
│ │          object at 0x123c11140>, 'branch:to:Bull Researcher': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11180>, 'branch:to:Bear Researcher':    │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c111c0>, 'branch:to:Research Manager': <langgraph.channels.ephemeral_value.EphemeralValue     │ │
│ │          object at 0x123c11200>, 'branch:to:Trader': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11240>, 'branch:to:Risk Quant Analyst':          │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11280>, 'branch:to:Risky Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object │ │
│ │          at 0x123c112c0>, 'branch:to:Neutral Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11300>, 'branch:to:Safe Analyst':              │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11340>, 'branch:to:Risk Judge': <langgraph.channels.ephemeral_value.EphemeralValue object at │ │
│ │          0x123c11380>, 'branch:to:Execution Strategist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c113c0>, 'branch:to:Compliance Officer':      │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11400>}, {}, PregelTaskWrites(path=('__pregel_pull', 'Macro Economist'), name='Macro         │ │
│ │          Economist', writes=deque([('__error__', AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]), triggers=('branch:to:Macro       │ │
│ │          Economist',))),                                                                                                                                                 │ │
│ │          │   '__pregel_store': None,                                                                                                                                     │ │
│ │          │   '__pregel_checkpointer': None,                                                                                                                              │ │
│ │          │   'checkpoint_map': {'': '1f0c2acd-176c-6a18-8000-0f50a9acbb05'},                                                                                             │ │
│ │          │   'checkpoint_id': None,                                                                                                                                      │ │
│ │          │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                    │ │
│ │          │   '__pregel_scratchpad': PregelScratchpad(                                                                                                                    │ │
│ │          │   │   call_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea680>,                                                                           │ │
│ │          │   │   interrupt_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea6b0>,                                                                      │ │
│ │          │   │   get_null_resume=<function _scratchpad.<locals>.get_null_resume at 0x123ad2680>,                                                                         │ │
│ │          │   │   resume=[],                                                                                                                                              │ │
│ │          │   │   subgraph_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea860>                                                                        │ │
│ │          │   ),                                                                                                                                                          │ │
│ │          │   '__pregel_previous': None,                                                                                                                                  │ │
│ │          │   ... +1                                                                                                                                                      │ │
│ │          }                                                                                                                                                               │ │
│ │   args = (                                                                                                                                                               │ │
│ │          │   {                                                                                                                                                           │ │
│ │          │   │   'messages': [HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')],                      │ │
│ │          │   │   'company_of_interest': 'AAPL',                                                                                                                          │ │
│ │          │   │   'trade_date': '2025-11-16',                                                                                                                             │ │
│ │          │   │   'market_report': '',                                                                                                                                    │ │
│ │          │   │   'sentiment_report': '',                                                                                                                                 │ │
│ │          │   │   'news_report': '',                                                                                                                                      │ │
│ │          │   │   'fundamentals_report': '',                                                                                                                              │ │
│ │          │   │   'macro_report': '',                                                                                                                                     │ │
│ │          │   │   'alternative_data_report': '',                                                                                                                          │ │
│ │          │   │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                                         │ │
│ │          │   │   ... +8                                                                                                                                                  │ │
│ │          │   },                                                                                                                                                          │ │
│ │          )                                                                                                                                                               │ │
│ │ config = {                                                                                                                                                               │ │
│ │          │   'recursion_limit': 100,                                                                                                                                     │ │
│ │          │   'metadata': {                                                                                                                                               │ │
│ │          │   │   'langgraph_step': 1,                                                                                                                                    │ │
│ │          │   │   'langgraph_node': 'Macro Economist',                                                                                                                    │ │
│ │          │   │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                                                   │ │
│ │          │   │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                                                 │ │
│ │          │   │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08'                                                                       │ │
│ │          │   },                                                                                                                                                          │ │
│ │          │   'configurable': {                                                                                                                                           │ │
│ │          │   │   '__pregel_task_id': '42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                             │ │
│ │          │   │   '__pregel_send': <built-in method extend of collections.deque object at 0x123c24520>,                                                                   │ │
│ │          │   │   '__pregel_read': functools.partial(<function local_read at 0x104a7e0e0>, {'messages': <langgraph.channels.binop.BinaryOperatorAggregate object at       │ │
│ │          0x123adeec0>, 'company_of_interest': <langgraph.channels.last_value.LastValue object at 0x123adf000>, 'trade_date': <langgraph.channels.last_value.LastValue    │ │
│ │          object at 0x123ae0300>, 'sender': <langgraph.channels.last_value.LastValue object at 0x123adef40>, 'market_report': <langgraph.channels.last_value.LastValue    │ │
│ │          object at 0x123add4c0>, 'sentiment_report': <langgraph.channels.last_value.LastValue object at 0x123adc5c0>, 'news_report':                                     │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123ade0c0>, 'fundamentals_report': <langgraph.channels.last_value.LastValue object at 0x123adfc40>,        │ │
│ │          'macro_report': <langgraph.channels.last_value.LastValue object at 0x123adee40>, 'alternative_data_report': <langgraph.channels.last_value.LastValue object at  │ │
│ │          0x123adf7c0>, 'investment_debate_state': <langgraph.channels.last_value.LastValue object at 0x123adf9c0>, 'investment_plan':                                    │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123adc8c0>, 'trader_investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adf8c0>,     │ │
│ │          'risk_quant_report': <langgraph.channels.last_value.LastValue object at 0x123c08fc0>, 'risk_metrics_json': <langgraph.channels.last_value.LastValue object at   │ │
│ │          0x123c08700>, 'execution_plan': <langgraph.channels.last_value.LastValue object at 0x123c0b2c0>, 'risk_debate_state': <langgraph.channels.last_value.LastValue  │ │
│ │          object at 0x123c09040>, 'final_trade_decision': <langgraph.channels.last_value.LastValue object at 0x123c10b80>, 'compliance_report':                           │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123c10bc0>, 'compliance_status': <langgraph.channels.last_value.LastValue object at 0x123c10c00>,          │ │
│ │          'proposed_trade': <langgraph.channels.last_value.LastValue object at 0x123c10c40>, 'cost_statistics': <langgraph.channels.last_value.LastValue object at        │ │
│ │          0x123c10c80>, '__start__': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10cc0>, 'branch:to:Macro Economist':                              │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d00>, 'branch:to:Msg Clear Macro Economist':                                               │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d40>, 'branch:to:tools_macro': <langgraph.channels.ephemeral_value.EphemeralValue object   │ │
│ │          at 0x123c10d80>, 'branch:to:Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10dc0>, 'branch:to:Msg Clear Market Analyst':   │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e00>, 'branch:to:tools_market': <langgraph.channels.ephemeral_value.EphemeralValue object  │ │
│ │          at 0x123c10e40>, 'branch:to:Social Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e80>, 'branch:to:Msg Clear Social Analyst':   │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10ec0>, 'branch:to:tools_social': <langgraph.channels.ephemeral_value.EphemeralValue object  │ │
│ │          at 0x123c10f00>, 'branch:to:News Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f40>, 'branch:to:Msg Clear News Analyst':       │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f80>, 'branch:to:tools_news': <langgraph.channels.ephemeral_value.EphemeralValue object at │ │
│ │          0x123c10fc0>, 'branch:to:Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11000>, 'branch:to:Msg Clear Fundamentals    │ │
│ │          Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11040>, 'branch:to:tools_fundamentals':                                            │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11080>, 'branch:to:Alternative Data Analyst':                                                │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c110c0>, 'branch:to:Msg Clear Alternative Data Analyst':                                      │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11100>, 'branch:to:tools_alternative': <langgraph.channels.ephemeral_value.EphemeralValue    │ │
│ │          object at 0x123c11140>, 'branch:to:Bull Researcher': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11180>, 'branch:to:Bear Researcher':    │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c111c0>, 'branch:to:Research Manager': <langgraph.channels.ephemeral_value.EphemeralValue     │ │
│ │          object at 0x123c11200>, 'branch:to:Trader': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11240>, 'branch:to:Risk Quant Analyst':          │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11280>, 'branch:to:Risky Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object │ │
│ │          at 0x123c112c0>, 'branch:to:Neutral Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11300>, 'branch:to:Safe Analyst':              │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11340>, 'branch:to:Risk Judge': <langgraph.channels.ephemeral_value.EphemeralValue object at │ │
│ │          0x123c11380>, 'branch:to:Execution Strategist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c113c0>, 'branch:to:Compliance Officer':      │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11400>}, {}, PregelTaskWrites(path=('__pregel_pull', 'Macro Economist'), name='Macro         │ │
│ │          Economist', writes=deque([('__error__', AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]), triggers=('branch:to:Macro       │ │
│ │          Economist',))),                                                                                                                                                 │ │
│ │          │   │   '__pregel_store': None,                                                                                                                                 │ │
│ │          │   │   '__pregel_checkpointer': None,                                                                                                                          │ │
│ │          │   │   'checkpoint_map': {'': '1f0c2acd-176c-6a18-8000-0f50a9acbb05'},                                                                                         │ │
│ │          │   │   'checkpoint_id': None,                                                                                                                                  │ │
│ │          │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                │ │
│ │          │   │   '__pregel_scratchpad': PregelScratchpad(                                                                                                                │ │
│ │          │   │   │   call_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea680>,                                                                       │ │
│ │          │   │   │   interrupt_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea6b0>,                                                                  │ │
│ │          │   │   │   get_null_resume=<function _scratchpad.<locals>.get_null_resume at 0x123ad2680>,                                                                     │ │
│ │          │   │   │   resume=[],                                                                                                                                          │ │
│ │          │   │   │   subgraph_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea860>                                                                    │ │
│ │          │   │   ),                                                                                                                                                      │ │
│ │          │   │   '__pregel_previous': None,                                                                                                                              │ │
│ │          │   │   ... +1                                                                                                                                                  │ │
│ │          │   },                                                                                                                                                          │ │
│ │          │   'callbacks': <langchain_core.callbacks.manager.CallbackManager object at 0x123aeb1c0>                                                                       │ │
│ │          }                                                                                                                                                               │ │
│ │  input = {                                                                                                                                                               │ │
│ │          │   'messages': [HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')],                          │ │
│ │          │   'company_of_interest': 'AAPL',                                                                                                                              │ │
│ │          │   'trade_date': '2025-11-16',                                                                                                                                 │ │
│ │          │   'market_report': '',                                                                                                                                        │ │
│ │          │   'sentiment_report': '',                                                                                                                                     │ │
│ │          │   'news_report': '',                                                                                                                                          │ │
│ │          │   'fundamentals_report': '',                                                                                                                                  │ │
│ │          │   'macro_report': '',                                                                                                                                         │ │
│ │          │   'alternative_data_report': '',                                                                                                                              │ │
│ │          │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                                             │ │
│ │          │   ... +8                                                                                                                                                      │ │
│ │          }                                                                                                                                                               │ │
│ │ kwargs = {}                                                                                                                                                              │ │
│ │   self = Macro Economist(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})                                                        │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/tradingagents/metrics/cost_tracker.py:55 in wrapped                                                                                    │
│                                                                                                                                                                              │
│    52 │   │                                                                                                                                                                  │
│    53 │   │   def wrapped(*args: Any, **kwargs: Any):                                                                                                                        │
│    54 │   │   │   with self.section(section_name):                                                                                                                           │
│ ❱  55 │   │   │   │   return fn(*args, **kwargs)                                                                                                                             │
│    56 │   │                                                                                                                                                                  │
│    57 │   │   return wrapped                                                                                                                                                 │
│    58                                                                                                                                                                        │
│                                                                                                                                                                              │
│ ╭───────────────────────────────────────────────────────────────────────── locals ──────────────────────────────────────────────────────────────────────────╮                │
│ │         args = (                                                                                                                                          │                │
│ │                │   {                                                                                                                                      │                │
│ │                │   │   'messages': [                                                                                                                      │                │
│ │                │   │   │   HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')            │                │
│ │                │   │   ],                                                                                                                                 │                │
│ │                │   │   'company_of_interest': 'AAPL',                                                                                                     │                │
│ │                │   │   'trade_date': '2025-11-16',                                                                                                        │                │
│ │                │   │   'market_report': '',                                                                                                               │                │
│ │                │   │   'sentiment_report': '',                                                                                                            │                │
│ │                │   │   'news_report': '',                                                                                                                 │                │
│ │                │   │   'fundamentals_report': '',                                                                                                         │                │
│ │                │   │   'macro_report': '',                                                                                                                │                │
│ │                │   │   'alternative_data_report': '',                                                                                                     │                │
│ │                │   │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                    │                │
│ │                │   │   ... +8                                                                                                                             │                │
│ │                │   },                                                                                                                                     │                │
│ │                )                                                                                                                                          │                │
│ │       kwargs = {}                                                                                                                                         │                │
│ │ section_name = 'Macro Economist'                                                                                                                          │                │
│ │         self = <tradingagents.metrics.cost_tracker.CostTracker object at 0x122e53a60>                                                                     │                │
│ ╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯                │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/tradingagents/agents/analysts/macro_economist.py:77 in macro_node                                                                      │
│                                                                                                                                                                              │
│   74 │   │   │   current_date=current_date,                                                                                                                                  │
│   75 │   │   )                                                                                                                                                               │
│   76 │   │   chain = prompt | llm.bind_tools(tools)                                                                                                                          │
│ ❱ 77 │   │   result = chain.invoke(state["messages"])                                                                                                                        │
│   78 │   │                                                                                                                                                                   │
│   79 │   │   report = ""                                                                                                                                                     │
│   80 │   │   if not result.tool_calls:                                                                                                                                       │
│                                                                                                                                                                              │
│ ╭───────────────────────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────────────────────╮ │
│ │          chain = RunnableSequence(                                                                                                                                       │ │
│ │                  │   first=ChatPromptTemplate(                                                                                                                           │ │
│ │                  │   │   input_variables=['messages'],                                                                                                                   │ │
│ │                  │   │   input_types={                                                                                                                                   │ │
│ │                  │   │   │   'messages': list[typing.Annotated[typing.Union[typing.Annotated[langchain_core.messages.ai.AIMessage, Tag(tag='ai')],                       │ │
│ │                  typing.Annotated[langchain_core.messages.human.HumanMessage, Tag(tag='human')], typing.Annotated[langchain_core.messages.chat.ChatMessage,              │ │
│ │                  Tag(tag='chat')], typing.Annotated[langchain_core.messages.system.SystemMessage, Tag(tag='system')],                                                    │ │
│ │                  typing.Annotated[langchain_core.messages.function.FunctionMessage, Tag(tag='function')], typing.Annotated[langchain_core.messages.tool.ToolMessage,     │ │
│ │                  Tag(tag='tool')], typing.Annotated[langchain_core.messages.ai.AIMessageChunk, Tag(tag='AIMessageChunk')],                                               │ │
│ │                  typing.Annotated[langchain_core.messages.human.HumanMessageChunk, Tag(tag='HumanMessageChunk')],                                                        │ │
│ │                  typing.Annotated[langchain_core.messages.chat.ChatMessageChunk, Tag(tag='ChatMessageChunk')],                                                           │ │
│ │                  typing.Annotated[langchain_core.messages.system.SystemMessageChunk, Tag(tag='SystemMessageChunk')],                                                     │ │
│ │                  typing.Annotated[langchain_core.messages.function.FunctionMessageChunk, Tag(tag='FunctionMessageChunk')],                                               │ │
│ │                  typing.Annotated[langchain_core.messages.tool.ToolMessageChunk, Tag(tag='ToolMessageChunk')]], FieldInfo(annotation=NoneType, required=True,            │ │
│ │                  discriminator=Discriminator(discriminator=<function _get_type at 0x1044a6dd0>, custom_error_type=None, custom_error_message=None,                       │ │
│ │                  custom_error_context=None))]]                                                                                                                           │ │
│ │                  │   │   },                                                                                                                                              │ │
│ │                  │   │   partial_variables={                                                                                                                             │ │
│ │                  │   │   │   'system_message': '\n<ROLE>\nYou are the **Macro Economist** agent in a multi-agent trading system. Y'+1910,                                │ │
│ │                  │   │   │   'tool_names': 'get_global_news, get_news',                                                                                                  │ │
│ │                  │   │   │   'ticker': 'AAPL',                                                                                                                           │ │
│ │                  │   │   │   'current_date': '2025-11-16'                                                                                                                │ │
│ │                  │   │   },                                                                                                                                              │ │
│ │                  │   │   messages=[                                                                                                                                      │ │
│ │                  │   │   │   SystemMessagePromptTemplate(                                                                                                                │ │
│ │                  │   │   │   │   prompt=PromptTemplate(                                                                                                                  │ │
│ │                  │   │   │   │   │   input_variables=['current_date', 'system_message', 'ticker', 'tool_names'],                                                         │ │
│ │                  │   │   │   │   │   input_types={},                                                                                                                     │ │
│ │                  │   │   │   │   │   partial_variables={},                                                                                                               │ │
│ │                  │   │   │   │   │   template='You are a helpful AI economist working inside a multi-agent desk. You can call: '+250                                     │ │
│ │                  │   │   │   │   ),                                                                                                                                      │ │
│ │                  │   │   │   │   additional_kwargs={}                                                                                                                    │ │
│ │                  │   │   │   ),                                                                                                                                          │ │
│ │                  │   │   │   MessagesPlaceholder(variable_name='messages')                                                                                               │ │
│ │                  │   │   ]                                                                                                                                               │ │
│ │                  │   ),                                                                                                                                                  │ │
│ │                  │   middle=[],                                                                                                                                          │ │
│ │                  │   last=RunnableBinding(                                                                                                                               │ │
│ │                  │   │   bound=CostTrackingChatOpenAI(                                                                                                                   │ │
│ │                  │   │   │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,                                                   │ │
│ │                  │   │   │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>,                                        │ │
│ │                  │   │   │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                                                          │ │
│ │                  │   │   │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                                                               │ │
│ │                  │   │   │   model_name='gpt-5.1',                                                                                                                       │ │
│ │                  │   │   │   model_kwargs={},                                                                                                                            │ │
│ │                  │   │   │   openai_api_key=SecretStr('**********'),                                                                                                     │ │
│ │                  │   │   │   openai_api_base='https://api.openai.com/v1'                                                                                                 │ │
│ │                  │   │   ),                                                                                                                                              │ │
│ │                  │   │   kwargs={                                                                                                                                        │ │
│ │                  │   │   │   'tools': [                                                                                                                                  │ │
│ │                  │   │   │   │   {                                                                                                                                       │ │
│ │                  │   │   │   │   │   'type': 'function',                                                                                                                 │ │
│ │                  │   │   │   │   │   'function': {                                                                                                                       │ │
│ │                  │   │   │   │   │   │   'name': 'get_global_news',                                                                                                      │ │
│ │                  │   │   │   │   │   │   'description': 'Retrieve global news data.\nUses the configured news_data vendor.\nArgs:\n    curr_'+242,                       │ │
│ │                  │   │   │   │   │   │   'parameters': {                                                                                                                 │ │
│ │                  │   │   │   │   │   │   │   'properties': {                                                                                                             │ │
│ │                  │   │   │   │   │   │   │   │   'curr_date': {'description': 'Current date in yyyy-mm-dd format', 'type': 'string'},                                    │ │
│ │                  │   │   │   │   │   │   │   │   'look_back_days': {'default': 7, 'description': 'Number of days to look back', 'type': 'integer'},                      │ │
│ │                  │   │   │   │   │   │   │   │   'limit': {'default': 5, 'description': 'Maximum number of articles to return', 'type': 'integer'}                       │ │
│ │                  │   │   │   │   │   │   │   },                                                                                                                          │ │
│ │                  │   │   │   │   │   │   │   'required': ['curr_date'],                                                                                                  │ │
│ │                  │   │   │   │   │   │   │   'type': 'object'                                                                                                            │ │
│ │                  │   │   │   │   │   │   }                                                                                                                               │ │
│ │                  │   │   │   │   │   }                                                                                                                                   │ │
│ │                  │   │   │   │   },                                                                                                                                      │ │
│ │                  │   │   │   │   {                                                                                                                                       │ │
│ │                  │   │   │   │   │   'type': 'function',                                                                                                                 │ │
│ │                  │   │   │   │   │   'function': {                                                                                                                       │ │
│ │                  │   │   │   │   │   │   'name': 'get_news',                                                                                                             │ │
│ │                  │   │   │   │   │   │   'description': 'Retrieve news data for a given ticker symbol.\nUses the configured news_data vend'+203,                         │ │
│ │                  │   │   │   │   │   │   'parameters': {                                                                                                                 │ │
│ │                  │   │   │   │   │   │   │   'properties': {                                                                                                             │ │
│ │                  │   │   │   │   │   │   │   │   'ticker': {'description': 'Ticker symbol', 'type': 'string'},                                                           │ │
│ │                  │   │   │   │   │   │   │   │   'start_date': {'description': 'Start date in yyyy-mm-dd format', 'type': 'string'},                                     │ │
│ │                  │   │   │   │   │   │   │   │   'end_date': {'description': 'End date in yyyy-mm-dd format', 'type': 'string'}                                          │ │
│ │                  │   │   │   │   │   │   │   },                                                                                                                          │ │
│ │                  │   │   │   │   │   │   │   'required': ['ticker', 'start_date', 'end_date'],                                                                           │ │
│ │                  │   │   │   │   │   │   │   'type': 'object'                                                                                                            │ │
│ │                  │   │   │   │   │   │   }                                                                                                                               │ │
│ │                  │   │   │   │   │   }                                                                                                                                   │ │
│ │                  │   │   │   │   }                                                                                                                                       │ │
│ │                  │   │   │   ]                                                                                                                                           │ │
│ │                  │   │   },                                                                                                                                              │ │
│ │                  │   │   config={},                                                                                                                                      │ │
│ │                  │   │   config_factories=[]                                                                                                                             │ │
│ │                  │   )                                                                                                                                                   │ │
│ │                  )                                                                                                                                                       │ │
│ │   current_date = '2025-11-16'                                                                                                                                            │ │
│ │            llm = CostTrackingChatOpenAI(                                                                                                                                 │ │
│ │                  │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,                                                           │ │
│ │                  │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>,                                                │ │
│ │                  │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                                                                  │ │
│ │                  │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                                                                       │ │
│ │                  │   model_name='gpt-5.1',                                                                                                                               │ │
│ │                  │   model_kwargs={},                                                                                                                                    │ │
│ │                  │   openai_api_key=SecretStr('**********'),                                                                                                             │ │
│ │                  │   openai_api_base='https://api.openai.com/v1'                                                                                                         │ │
│ │                  )                                                                                                                                                       │ │
│ │         prompt = ChatPromptTemplate(                                                                                                                                     │ │
│ │                  │   input_variables=['messages'],                                                                                                                       │ │
│ │                  │   input_types={                                                                                                                                       │ │
│ │                  │   │   'messages': list[typing.Annotated[typing.Union[typing.Annotated[langchain_core.messages.ai.AIMessage, Tag(tag='ai')],                           │ │
│ │                  typing.Annotated[langchain_core.messages.human.HumanMessage, Tag(tag='human')], typing.Annotated[langchain_core.messages.chat.ChatMessage,              │ │
│ │                  Tag(tag='chat')], typing.Annotated[langchain_core.messages.system.SystemMessage, Tag(tag='system')],                                                    │ │
│ │                  typing.Annotated[langchain_core.messages.function.FunctionMessage, Tag(tag='function')], typing.Annotated[langchain_core.messages.tool.ToolMessage,     │ │
│ │                  Tag(tag='tool')], typing.Annotated[langchain_core.messages.ai.AIMessageChunk, Tag(tag='AIMessageChunk')],                                               │ │
│ │                  typing.Annotated[langchain_core.messages.human.HumanMessageChunk, Tag(tag='HumanMessageChunk')],                                                        │ │
│ │                  typing.Annotated[langchain_core.messages.chat.ChatMessageChunk, Tag(tag='ChatMessageChunk')],                                                           │ │
│ │                  typing.Annotated[langchain_core.messages.system.SystemMessageChunk, Tag(tag='SystemMessageChunk')],                                                     │ │
│ │                  typing.Annotated[langchain_core.messages.function.FunctionMessageChunk, Tag(tag='FunctionMessageChunk')],                                               │ │
│ │                  typing.Annotated[langchain_core.messages.tool.ToolMessageChunk, Tag(tag='ToolMessageChunk')]], FieldInfo(annotation=NoneType, required=True,            │ │
│ │                  discriminator=Discriminator(discriminator=<function _get_type at 0x1044a6dd0>, custom_error_type=None, custom_error_message=None,                       │ │
│ │                  custom_error_context=None))]]                                                                                                                           │ │
│ │                  │   },                                                                                                                                                  │ │
│ │                  │   partial_variables={                                                                                                                                 │ │
│ │                  │   │   'system_message': '\n<ROLE>\nYou are the **Macro Economist** agent in a multi-agent trading system. Y'+1910,                                    │ │
│ │                  │   │   'tool_names': 'get_global_news, get_news',                                                                                                      │ │
│ │                  │   │   'ticker': 'AAPL',                                                                                                                               │ │
│ │                  │   │   'current_date': '2025-11-16'                                                                                                                    │ │
│ │                  │   },                                                                                                                                                  │ │
│ │                  │   messages=[                                                                                                                                          │ │
│ │                  │   │   SystemMessagePromptTemplate(                                                                                                                    │ │
│ │                  │   │   │   prompt=PromptTemplate(                                                                                                                      │ │
│ │                  │   │   │   │   input_variables=['current_date', 'system_message', 'ticker', 'tool_names'],                                                             │ │
│ │                  │   │   │   │   input_types={},                                                                                                                         │ │
│ │                  │   │   │   │   partial_variables={},                                                                                                                   │ │
│ │                  │   │   │   │   template='You are a helpful AI economist working inside a multi-agent desk. You can call: '+250                                         │ │
│ │                  │   │   │   ),                                                                                                                                          │ │
│ │                  │   │   │   additional_kwargs={}                                                                                                                        │ │
│ │                  │   │   ),                                                                                                                                              │ │
│ │                  │   │   MessagesPlaceholder(variable_name='messages')                                                                                                   │ │
│ │                  │   ]                                                                                                                                                   │ │
│ │                  )                                                                                                                                                       │ │
│ │          state = {                                                                                                                                                       │ │
│ │                  │   'messages': [HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')],                  │ │
│ │                  │   'company_of_interest': 'AAPL',                                                                                                                      │ │
│ │                  │   'trade_date': '2025-11-16',                                                                                                                         │ │
│ │                  │   'market_report': '',                                                                                                                                │ │
│ │                  │   'sentiment_report': '',                                                                                                                             │ │
│ │                  │   'news_report': '',                                                                                                                                  │ │
│ │                  │   'fundamentals_report': '',                                                                                                                          │ │
│ │                  │   'macro_report': '',                                                                                                                                 │ │
│ │                  │   'alternative_data_report': '',                                                                                                                      │ │
│ │                  │   'investment_debate_state': {'history': '', 'current_response': '', 'count': 0},                                                                     │ │
│ │                  │   ... +8                                                                                                                                              │ │
│ │                  }                                                                                                                                                       │ │
│ │ system_message = '\n<ROLE>\nYou are the **Macro Economist** agent in a multi-agent trading system. Y'+1910                                                               │ │
│ │         ticker = 'AAPL'                                                                                                                                                  │ │
│ │          tools = [                                                                                                                                                       │ │
│ │                  │   StructuredTool(                                                                                                                                     │ │
│ │                  │   │   name='get_global_news',                                                                                                                         │ │
│ │                  │   │   description='Retrieve global news data.\nUses the configured news_data vendor.\nArgs:\n    curr_'+242,                                          │ │
│ │                  │   │   args_schema=<class 'langchain_core.utils.pydantic.get_global_news'>,                                                                            │ │
│ │                  │   │   func=<function get_global_news at 0x112fa5120>                                                                                                  │ │
│ │                  │   ),                                                                                                                                                  │ │
│ │                  │   StructuredTool(                                                                                                                                     │ │
│ │                  │   │   name='get_news',                                                                                                                                │ │
│ │                  │   │   description='Retrieve news data for a given ticker symbol.\nUses the configured news_data vend'+203,                                            │ │
│ │                  │   │   args_schema=<class 'langchain_core.utils.pydantic.get_news'>,                                                                                   │ │
│ │                  │   │   func=<function get_news at 0x112fa5750>                                                                                                         │ │
│ │                  │   )                                                                                                                                                   │ │
│ │                  ]                                                                                                                                                       │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/langchain_core/runnables/base.py:3047 in invoke                                                     │
│                                                                                                                                                                              │
│   3044 │   │   │   │   │   if i == 0:                                                                                                                                        │
│   3045 │   │   │   │   │   │   input_ = context.run(step.invoke, input_, config, **kwargs)                                                                                   │
│   3046 │   │   │   │   │   else:                                                                                                                                             │
│ ❱ 3047 │   │   │   │   │   │   input_ = context.run(step.invoke, input_, config)                                                                                             │
│   3048 │   │   # finish the root run                                                                                                                                         │
│   3049 │   │   except BaseException as e:                                                                                                                                    │
│   3050 │   │   │   run_manager.on_chain_error(e)                                                                                                                             │
│                                                                                                                                                                              │
│ ╭───────────────────────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────────────────────╮ │
│ │ callback_manager = <langchain_core.callbacks.manager.CallbackManager object at 0x123c4cdc0>                                                                              │ │
│ │           config = {                                                                                                                                                     │ │
│ │                    │   'tags': [],                                                                                                                                       │ │
│ │                    │   'metadata': {                                                                                                                                     │ │
│ │                    │   │   'langgraph_step': 1,                                                                                                                          │ │
│ │                    │   │   'langgraph_node': 'Macro Economist',                                                                                                          │ │
│ │                    │   │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                                         │ │
│ │                    │   │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                                       │ │
│ │                    │   │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                            │ │
│ │                    │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08'                                                                       │ │
│ │                    │   },                                                                                                                                                │ │
│ │                    │   'callbacks': <langchain_core.callbacks.manager.CallbackManager object at 0x123aeb670>,                                                            │ │
│ │                    │   'recursion_limit': 100,                                                                                                                           │ │
│ │                    │   'configurable': {                                                                                                                                 │ │
│ │                    │   │   '__pregel_task_id': '42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                   │ │
│ │                    │   │   '__pregel_send': <built-in method extend of collections.deque object at 0x123c24520>,                                                         │ │
│ │                    │   │   '__pregel_read': functools.partial(<function local_read at 0x104a7e0e0>, {'messages': <langgraph.channels.binop.BinaryOperatorAggregate       │ │
│ │                    object at 0x123adeec0>, 'company_of_interest': <langgraph.channels.last_value.LastValue object at 0x123adf000>, 'trade_date':                         │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123ae0300>, 'sender': <langgraph.channels.last_value.LastValue object at 0x123adef40>,           │ │
│ │                    'market_report': <langgraph.channels.last_value.LastValue object at 0x123add4c0>, 'sentiment_report': <langgraph.channels.last_value.LastValue object │ │
│ │                    at 0x123adc5c0>, 'news_report': <langgraph.channels.last_value.LastValue object at 0x123ade0c0>, 'fundamentals_report':                               │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123adfc40>, 'macro_report': <langgraph.channels.last_value.LastValue object at 0x123adee40>,     │ │
│ │                    'alternative_data_report': <langgraph.channels.last_value.LastValue object at 0x123adf7c0>, 'investment_debate_state':                                │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123adf9c0>, 'investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adc8c0>,  │ │
│ │                    'trader_investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adf8c0>, 'risk_quant_report':                                       │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123c08fc0>, 'risk_metrics_json': <langgraph.channels.last_value.LastValue object at              │ │
│ │                    0x123c08700>, 'execution_plan': <langgraph.channels.last_value.LastValue object at 0x123c0b2c0>, 'risk_debate_state':                                 │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123c09040>, 'final_trade_decision': <langgraph.channels.last_value.LastValue object at           │ │
│ │                    0x123c10b80>, 'compliance_report': <langgraph.channels.last_value.LastValue object at 0x123c10bc0>, 'compliance_status':                              │ │
│ │                    <langgraph.channels.last_value.LastValue object at 0x123c10c00>, 'proposed_trade': <langgraph.channels.last_value.LastValue object at 0x123c10c40>,   │ │
│ │                    'cost_statistics': <langgraph.channels.last_value.LastValue object at 0x123c10c80>, '__start__': <langgraph.channels.ephemeral_value.EphemeralValue   │ │
│ │                    object at 0x123c10cc0>, 'branch:to:Macro Economist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d00>, 'branch:to:Msg Clear  │ │
│ │                    Macro Economist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d40>, 'branch:to:tools_macro':                                 │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d80>, 'branch:to:Market Analyst':                                                │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10dc0>, 'branch:to:Msg Clear Market Analyst':                                      │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e00>, 'branch:to:tools_market':                                                  │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e40>, 'branch:to:Social Analyst':                                                │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e80>, 'branch:to:Msg Clear Social Analyst':                                      │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10ec0>, 'branch:to:tools_social':                                                  │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f00>, 'branch:to:News Analyst':                                                  │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f40>, 'branch:to:Msg Clear News Analyst':                                        │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f80>, 'branch:to:tools_news': <langgraph.channels.ephemeral_value.EphemeralValue │ │
│ │                    object at 0x123c10fc0>, 'branch:to:Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11000>, 'branch:to:Msg   │ │
│ │                    Clear Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11040>, 'branch:to:tools_fundamentals':               │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11080>, 'branch:to:Alternative Data Analyst':                                      │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c110c0>, 'branch:to:Msg Clear Alternative Data Analyst':                            │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11100>, 'branch:to:tools_alternative':                                             │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11140>, 'branch:to:Bull Researcher':                                               │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11180>, 'branch:to:Bear Researcher':                                               │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c111c0>, 'branch:to:Research Manager':                                              │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11200>, 'branch:to:Trader': <langgraph.channels.ephemeral_value.EphemeralValue     │ │
│ │                    object at 0x123c11240>, 'branch:to:Risk Quant Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11280>, 'branch:to:Risky   │ │
│ │                    Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c112c0>, 'branch:to:Neutral Analyst':                                     │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11300>, 'branch:to:Safe Analyst':                                                  │ │
│ │                    <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11340>, 'branch:to:Risk Judge': <langgraph.channels.ephemeral_value.EphemeralValue │ │
│ │                    object at 0x123c11380>, 'branch:to:Execution Strategist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c113c0>,                  │ │
│ │                    'branch:to:Compliance Officer': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11400>}, {},                                       │ │
│ │                    PregelTaskWrites(path=('__pregel_pull', 'Macro Economist'), name='Macro Economist', writes=deque([('__error__',                                       │ │
│ │                    AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]), triggers=('branch:to:Macro Economist',))),                     │ │
│ │                    │   │   '__pregel_store': None,                                                                                                                       │ │
│ │                    │   │   '__pregel_checkpointer': None,                                                                                                                │ │
│ │                    │   │   'checkpoint_map': {'': '1f0c2acd-176c-6a18-8000-0f50a9acbb05'},                                                                               │ │
│ │                    │   │   'checkpoint_id': None,                                                                                                                        │ │
│ │                    │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                      │ │
│ │                    │   │   '__pregel_scratchpad': PregelScratchpad(                                                                                                      │ │
│ │                    │   │   │   call_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea680>,                                                             │ │
│ │                    │   │   │   interrupt_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea6b0>,                                                        │ │
│ │                    │   │   │   get_null_resume=<function _scratchpad.<locals>.get_null_resume at 0x123ad2680>,                                                           │ │
│ │                    │   │   │   resume=[],                                                                                                                                │ │
│ │                    │   │   │   subgraph_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea860>                                                          │ │
│ │                    │   │   ),                                                                                                                                            │ │
│ │                    │   │   '__pregel_previous': None,                                                                                                                    │ │
│ │                    │   │   ... +1                                                                                                                                        │ │
│ │                    │   }                                                                                                                                                 │ │
│ │                    }                                                                                                                                                     │ │
│ │          context = <_contextvars.Context object at 0x122cb8680>                                                                                                          │ │
│ │                i = 1                                                                                                                                                     │ │
│ │            input = [HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')]                                 │ │
│ │           input_ = ChatPromptValue(                                                                                                                                      │ │
│ │                    │   messages=[                                                                                                                                        │ │
│ │                    │   │   SystemMessage(                                                                                                                                │ │
│ │                    │   │   │   content='You are a helpful AI economist working inside a multi-agent desk. You can call: '+2229,                                          │ │
│ │                    │   │   │   additional_kwargs={},                                                                                                                     │ │
│ │                    │   │   │   response_metadata={}                                                                                                                      │ │
│ │                    │   │   ),                                                                                                                                            │ │
│ │                    │   │   HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')                           │ │
│ │                    │   ]                                                                                                                                                 │ │
│ │                    )                                                                                                                                                     │ │
│ │           kwargs = {}                                                                                                                                                    │ │
│ │      run_manager = <langchain_core.callbacks.manager.CallbackManagerForChainRun object at 0x123aea830>                                                                   │ │
│ │             self = RunnableSequence(                                                                                                                                     │ │
│ │                    │   first=ChatPromptTemplate(                                                                                                                         │ │
│ │                    │   │   input_variables=['messages'],                                                                                                                 │ │
│ │                    │   │   input_types={                                                                                                                                 │ │
│ │                    │   │   │   'messages': list[typing.Annotated[typing.Union[typing.Annotated[langchain_core.messages.ai.AIMessage, Tag(tag='ai')],                     │ │
│ │                    typing.Annotated[langchain_core.messages.human.HumanMessage, Tag(tag='human')], typing.Annotated[langchain_core.messages.chat.ChatMessage,            │ │
│ │                    Tag(tag='chat')], typing.Annotated[langchain_core.messages.system.SystemMessage, Tag(tag='system')],                                                  │ │
│ │                    typing.Annotated[langchain_core.messages.function.FunctionMessage, Tag(tag='function')], typing.Annotated[langchain_core.messages.tool.ToolMessage,   │ │
│ │                    Tag(tag='tool')], typing.Annotated[langchain_core.messages.ai.AIMessageChunk, Tag(tag='AIMessageChunk')],                                             │ │
│ │                    typing.Annotated[langchain_core.messages.human.HumanMessageChunk, Tag(tag='HumanMessageChunk')],                                                      │ │
│ │                    typing.Annotated[langchain_core.messages.chat.ChatMessageChunk, Tag(tag='ChatMessageChunk')],                                                         │ │
│ │                    typing.Annotated[langchain_core.messages.system.SystemMessageChunk, Tag(tag='SystemMessageChunk')],                                                   │ │
│ │                    typing.Annotated[langchain_core.messages.function.FunctionMessageChunk, Tag(tag='FunctionMessageChunk')],                                             │ │
│ │                    typing.Annotated[langchain_core.messages.tool.ToolMessageChunk, Tag(tag='ToolMessageChunk')]], FieldInfo(annotation=NoneType, required=True,          │ │
│ │                    discriminator=Discriminator(discriminator=<function _get_type at 0x1044a6dd0>, custom_error_type=None, custom_error_message=None,                     │ │
│ │                    custom_error_context=None))]]                                                                                                                         │ │
│ │                    │   │   },                                                                                                                                            │ │
│ │                    │   │   partial_variables={                                                                                                                           │ │
│ │                    │   │   │   'system_message': '\n<ROLE>\nYou are the **Macro Economist** agent in a multi-agent trading system. Y'+1910,                              │ │
│ │                    │   │   │   'tool_names': 'get_global_news, get_news',                                                                                                │ │
│ │                    │   │   │   'ticker': 'AAPL',                                                                                                                         │ │
│ │                    │   │   │   'current_date': '2025-11-16'                                                                                                              │ │
│ │                    │   │   },                                                                                                                                            │ │
│ │                    │   │   messages=[                                                                                                                                    │ │
│ │                    │   │   │   SystemMessagePromptTemplate(                                                                                                              │ │
│ │                    │   │   │   │   prompt=PromptTemplate(                                                                                                                │ │
│ │                    │   │   │   │   │   input_variables=['current_date', 'system_message', 'ticker', 'tool_names'],                                                       │ │
│ │                    │   │   │   │   │   input_types={},                                                                                                                   │ │
│ │                    │   │   │   │   │   partial_variables={},                                                                                                             │ │
│ │                    │   │   │   │   │   template='You are a helpful AI economist working inside a multi-agent desk. You can call: '+250                                   │ │
│ │                    │   │   │   │   ),                                                                                                                                    │ │
│ │                    │   │   │   │   additional_kwargs={}                                                                                                                  │ │
│ │                    │   │   │   ),                                                                                                                                        │ │
│ │                    │   │   │   MessagesPlaceholder(variable_name='messages')                                                                                             │ │
│ │                    │   │   ]                                                                                                                                             │ │
│ │                    │   ),                                                                                                                                                │ │
│ │                    │   middle=[],                                                                                                                                        │ │
│ │                    │   last=RunnableBinding(                                                                                                                             │ │
│ │                    │   │   bound=CostTrackingChatOpenAI(                                                                                                                 │ │
│ │                    │   │   │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,                                                 │ │
│ │                    │   │   │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>,                                      │ │
│ │                    │   │   │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                                                        │ │
│ │                    │   │   │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                                                             │ │
│ │                    │   │   │   model_name='gpt-5.1',                                                                                                                     │ │
│ │                    │   │   │   model_kwargs={},                                                                                                                          │ │
│ │                    │   │   │   openai_api_key=SecretStr('**********'),                                                                                                   │ │
│ │                    │   │   │   openai_api_base='https://api.openai.com/v1'                                                                                               │ │
│ │                    │   │   ),                                                                                                                                            │ │
│ │                    │   │   kwargs={                                                                                                                                      │ │
│ │                    │   │   │   'tools': [                                                                                                                                │ │
│ │                    │   │   │   │   {                                                                                                                                     │ │
│ │                    │   │   │   │   │   'type': 'function',                                                                                                               │ │
│ │                    │   │   │   │   │   'function': {                                                                                                                     │ │
│ │                    │   │   │   │   │   │   'name': 'get_global_news',                                                                                                    │ │
│ │                    │   │   │   │   │   │   'description': 'Retrieve global news data.\nUses the configured news_data vendor.\nArgs:\n    curr_'+242,                     │ │
│ │                    │   │   │   │   │   │   'parameters': {                                                                                                               │ │
│ │                    │   │   │   │   │   │   │   'properties': {                                                                                                           │ │
│ │                    │   │   │   │   │   │   │   │   'curr_date': {'description': 'Current date in yyyy-mm-dd format', 'type': 'string'},                                  │ │
│ │                    │   │   │   │   │   │   │   │   'look_back_days': {'default': 7, 'description': 'Number of days to look back', 'type': 'integer'},                    │ │
│ │                    │   │   │   │   │   │   │   │   'limit': {'default': 5, 'description': 'Maximum number of articles to return', 'type': 'integer'}                     │ │
│ │                    │   │   │   │   │   │   │   },                                                                                                                        │ │
│ │                    │   │   │   │   │   │   │   'required': ['curr_date'],                                                                                                │ │
│ │                    │   │   │   │   │   │   │   'type': 'object'                                                                                                          │ │
│ │                    │   │   │   │   │   │   }                                                                                                                             │ │
│ │                    │   │   │   │   │   }                                                                                                                                 │ │
│ │                    │   │   │   │   },                                                                                                                                    │ │
│ │                    │   │   │   │   {                                                                                                                                     │ │
│ │                    │   │   │   │   │   'type': 'function',                                                                                                               │ │
│ │                    │   │   │   │   │   'function': {                                                                                                                     │ │
│ │                    │   │   │   │   │   │   'name': 'get_news',                                                                                                           │ │
│ │                    │   │   │   │   │   │   'description': 'Retrieve news data for a given ticker symbol.\nUses the configured news_data vend'+203,                       │ │
│ │                    │   │   │   │   │   │   'parameters': {                                                                                                               │ │
│ │                    │   │   │   │   │   │   │   'properties': {                                                                                                           │ │
│ │                    │   │   │   │   │   │   │   │   'ticker': {'description': 'Ticker symbol', 'type': 'string'},                                                         │ │
│ │                    │   │   │   │   │   │   │   │   'start_date': {'description': 'Start date in yyyy-mm-dd format', 'type': 'string'},                                   │ │
│ │                    │   │   │   │   │   │   │   │   'end_date': {'description': 'End date in yyyy-mm-dd format', 'type': 'string'}                                        │ │
│ │                    │   │   │   │   │   │   │   },                                                                                                                        │ │
│ │                    │   │   │   │   │   │   │   'required': ['ticker', 'start_date', 'end_date'],                                                                         │ │
│ │                    │   │   │   │   │   │   │   'type': 'object'                                                                                                          │ │
│ │                    │   │   │   │   │   │   }                                                                                                                             │ │
│ │                    │   │   │   │   │   }                                                                                                                                 │ │
│ │                    │   │   │   │   }                                                                                                                                     │ │
│ │                    │   │   │   ]                                                                                                                                         │ │
│ │                    │   │   },                                                                                                                                            │ │
│ │                    │   │   config={},                                                                                                                                    │ │
│ │                    │   │   config_factories=[]                                                                                                                           │ │
│ │                    │   )                                                                                                                                                 │ │
│ │                    )                                                                                                                                                     │ │
│ │             step = RunnableBinding(                                                                                                                                      │ │
│ │                    │   bound=CostTrackingChatOpenAI(                                                                                                                     │ │
│ │                    │   │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,                                                     │ │
│ │                    │   │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>,                                          │ │
│ │                    │   │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                                                            │ │
│ │                    │   │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                                                                 │ │
│ │                    │   │   model_name='gpt-5.1',                                                                                                                         │ │
│ │                    │   │   model_kwargs={},                                                                                                                              │ │
│ │                    │   │   openai_api_key=SecretStr('**********'),                                                                                                       │ │
│ │                    │   │   openai_api_base='https://api.openai.com/v1'                                                                                                   │ │
│ │                    │   ),                                                                                                                                                │ │
│ │                    │   kwargs={                                                                                                                                          │ │
│ │                    │   │   'tools': [                                                                                                                                    │ │
│ │                    │   │   │   {                                                                                                                                         │ │
│ │                    │   │   │   │   'type': 'function',                                                                                                                   │ │
│ │                    │   │   │   │   'function': {                                                                                                                         │ │
│ │                    │   │   │   │   │   'name': 'get_global_news',                                                                                                        │ │
│ │                    │   │   │   │   │   'description': 'Retrieve global news data.\nUses the configured news_data vendor.\nArgs:\n    curr_'+242,                         │ │
│ │                    │   │   │   │   │   'parameters': {                                                                                                                   │ │
│ │                    │   │   │   │   │   │   'properties': {                                                                                                               │ │
│ │                    │   │   │   │   │   │   │   'curr_date': {'description': 'Current date in yyyy-mm-dd format', 'type': 'string'},                                      │ │
│ │                    │   │   │   │   │   │   │   'look_back_days': {'default': 7, 'description': 'Number of days to look back', 'type': 'integer'},                        │ │
│ │                    │   │   │   │   │   │   │   'limit': {'default': 5, 'description': 'Maximum number of articles to return', 'type': 'integer'}                         │ │
│ │                    │   │   │   │   │   │   },                                                                                                                            │ │
│ │                    │   │   │   │   │   │   'required': ['curr_date'],                                                                                                    │ │
│ │                    │   │   │   │   │   │   'type': 'object'                                                                                                              │ │
│ │                    │   │   │   │   │   }                                                                                                                                 │ │
│ │                    │   │   │   │   }                                                                                                                                     │ │
│ │                    │   │   │   },                                                                                                                                        │ │
│ │                    │   │   │   {                                                                                                                                         │ │
│ │                    │   │   │   │   'type': 'function',                                                                                                                   │ │
│ │                    │   │   │   │   'function': {                                                                                                                         │ │
│ │                    │   │   │   │   │   'name': 'get_news',                                                                                                               │ │
│ │                    │   │   │   │   │   'description': 'Retrieve news data for a given ticker symbol.\nUses the configured news_data vend'+203,                           │ │
│ │                    │   │   │   │   │   'parameters': {                                                                                                                   │ │
│ │                    │   │   │   │   │   │   'properties': {                                                                                                               │ │
│ │                    │   │   │   │   │   │   │   'ticker': {'description': 'Ticker symbol', 'type': 'string'},                                                             │ │
│ │                    │   │   │   │   │   │   │   'start_date': {'description': 'Start date in yyyy-mm-dd format', 'type': 'string'},                                       │ │
│ │                    │   │   │   │   │   │   │   'end_date': {'description': 'End date in yyyy-mm-dd format', 'type': 'string'}                                            │ │
│ │                    │   │   │   │   │   │   },                                                                                                                            │ │
│ │                    │   │   │   │   │   │   'required': ['ticker', 'start_date', 'end_date'],                                                                             │ │
│ │                    │   │   │   │   │   │   'type': 'object'                                                                                                              │ │
│ │                    │   │   │   │   │   }                                                                                                                                 │ │
│ │                    │   │   │   │   }                                                                                                                                     │ │
│ │                    │   │   │   }                                                                                                                                         │ │
│ │                    │   │   ]                                                                                                                                             │ │
│ │                    │   },                                                                                                                                                │ │
│ │                    │   config={},                                                                                                                                        │ │
│ │                    │   config_factories=[]                                                                                                                               │ │
│ │                    )                                                                                                                                                     │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/langchain_core/runnables/base.py:5431 in invoke                                                     │
│                                                                                                                                                                              │
│   5428 │   │   config: Optional[RunnableConfig] = None,                                                                                                                      │
│   5429 │   │   **kwargs: Optional[Any],                                                                                                                                      │
│   5430 │   ) -> Output:                                                                                                                                                      │
│ ❱ 5431 │   │   return self.bound.invoke(                                                                                                                                     │
│   5432 │   │   │   input,                                                                                                                                                    │
│   5433 │   │   │   self._merge_configs(config),                                                                                                                              │
│   5434 │   │   │   **{**self.kwargs, **kwargs},                                                                                                                              │
│                                                                                                                                                                              │
│ ╭───────────────────────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────────────────────╮ │
│ │ config = {                                                                                                                                                               │ │
│ │          │   'tags': [],                                                                                                                                                 │ │
│ │          │   'metadata': {                                                                                                                                               │ │
│ │          │   │   'langgraph_step': 1,                                                                                                                                    │ │
│ │          │   │   'langgraph_node': 'Macro Economist',                                                                                                                    │ │
│ │          │   │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                                                   │ │
│ │          │   │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                                                 │ │
│ │          │   │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                      │ │
│ │          │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08'                                                                                 │ │
│ │          │   },                                                                                                                                                          │ │
│ │          │   'callbacks': <langchain_core.callbacks.manager.CallbackManager object at 0x123aeb670>,                                                                      │ │
│ │          │   'recursion_limit': 100,                                                                                                                                     │ │
│ │          │   'configurable': {                                                                                                                                           │ │
│ │          │   │   '__pregel_task_id': '42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                             │ │
│ │          │   │   '__pregel_send': <built-in method extend of collections.deque object at 0x123c24520>,                                                                   │ │
│ │          │   │   '__pregel_read': functools.partial(<function local_read at 0x104a7e0e0>, {'messages': <langgraph.channels.binop.BinaryOperatorAggregate object at       │ │
│ │          0x123adeec0>, 'company_of_interest': <langgraph.channels.last_value.LastValue object at 0x123adf000>, 'trade_date': <langgraph.channels.last_value.LastValue    │ │
│ │          object at 0x123ae0300>, 'sender': <langgraph.channels.last_value.LastValue object at 0x123adef40>, 'market_report': <langgraph.channels.last_value.LastValue    │ │
│ │          object at 0x123add4c0>, 'sentiment_report': <langgraph.channels.last_value.LastValue object at 0x123adc5c0>, 'news_report':                                     │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123ade0c0>, 'fundamentals_report': <langgraph.channels.last_value.LastValue object at 0x123adfc40>,        │ │
│ │          'macro_report': <langgraph.channels.last_value.LastValue object at 0x123adee40>, 'alternative_data_report': <langgraph.channels.last_value.LastValue object at  │ │
│ │          0x123adf7c0>, 'investment_debate_state': <langgraph.channels.last_value.LastValue object at 0x123adf9c0>, 'investment_plan':                                    │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123adc8c0>, 'trader_investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adf8c0>,     │ │
│ │          'risk_quant_report': <langgraph.channels.last_value.LastValue object at 0x123c08fc0>, 'risk_metrics_json': <langgraph.channels.last_value.LastValue object at   │ │
│ │          0x123c08700>, 'execution_plan': <langgraph.channels.last_value.LastValue object at 0x123c0b2c0>, 'risk_debate_state': <langgraph.channels.last_value.LastValue  │ │
│ │          object at 0x123c09040>, 'final_trade_decision': <langgraph.channels.last_value.LastValue object at 0x123c10b80>, 'compliance_report':                           │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123c10bc0>, 'compliance_status': <langgraph.channels.last_value.LastValue object at 0x123c10c00>,          │ │
│ │          'proposed_trade': <langgraph.channels.last_value.LastValue object at 0x123c10c40>, 'cost_statistics': <langgraph.channels.last_value.LastValue object at        │ │
│ │          0x123c10c80>, '__start__': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10cc0>, 'branch:to:Macro Economist':                              │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d00>, 'branch:to:Msg Clear Macro Economist':                                               │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d40>, 'branch:to:tools_macro': <langgraph.channels.ephemeral_value.EphemeralValue object   │ │
│ │          at 0x123c10d80>, 'branch:to:Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10dc0>, 'branch:to:Msg Clear Market Analyst':   │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e00>, 'branch:to:tools_market': <langgraph.channels.ephemeral_value.EphemeralValue object  │ │
│ │          at 0x123c10e40>, 'branch:to:Social Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e80>, 'branch:to:Msg Clear Social Analyst':   │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10ec0>, 'branch:to:tools_social': <langgraph.channels.ephemeral_value.EphemeralValue object  │ │
│ │          at 0x123c10f00>, 'branch:to:News Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f40>, 'branch:to:Msg Clear News Analyst':       │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f80>, 'branch:to:tools_news': <langgraph.channels.ephemeral_value.EphemeralValue object at │ │
│ │          0x123c10fc0>, 'branch:to:Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11000>, 'branch:to:Msg Clear Fundamentals    │ │
│ │          Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11040>, 'branch:to:tools_fundamentals':                                            │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11080>, 'branch:to:Alternative Data Analyst':                                                │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c110c0>, 'branch:to:Msg Clear Alternative Data Analyst':                                      │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11100>, 'branch:to:tools_alternative': <langgraph.channels.ephemeral_value.EphemeralValue    │ │
│ │          object at 0x123c11140>, 'branch:to:Bull Researcher': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11180>, 'branch:to:Bear Researcher':    │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c111c0>, 'branch:to:Research Manager': <langgraph.channels.ephemeral_value.EphemeralValue     │ │
│ │          object at 0x123c11200>, 'branch:to:Trader': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11240>, 'branch:to:Risk Quant Analyst':          │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11280>, 'branch:to:Risky Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object │ │
│ │          at 0x123c112c0>, 'branch:to:Neutral Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11300>, 'branch:to:Safe Analyst':              │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11340>, 'branch:to:Risk Judge': <langgraph.channels.ephemeral_value.EphemeralValue object at │ │
│ │          0x123c11380>, 'branch:to:Execution Strategist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c113c0>, 'branch:to:Compliance Officer':      │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11400>}, {}, PregelTaskWrites(path=('__pregel_pull', 'Macro Economist'), name='Macro         │ │
│ │          Economist', writes=deque([('__error__', AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]), triggers=('branch:to:Macro       │ │
│ │          Economist',))),                                                                                                                                                 │ │
│ │          │   │   '__pregel_store': None,                                                                                                                                 │ │
│ │          │   │   '__pregel_checkpointer': None,                                                                                                                          │ │
│ │          │   │   'checkpoint_map': {'': '1f0c2acd-176c-6a18-8000-0f50a9acbb05'},                                                                                         │ │
│ │          │   │   'checkpoint_id': None,                                                                                                                                  │ │
│ │          │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                │ │
│ │          │   │   '__pregel_scratchpad': PregelScratchpad(                                                                                                                │ │
│ │          │   │   │   call_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea680>,                                                                       │ │
│ │          │   │   │   interrupt_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea6b0>,                                                                  │ │
│ │          │   │   │   get_null_resume=<function _scratchpad.<locals>.get_null_resume at 0x123ad2680>,                                                                     │ │
│ │          │   │   │   resume=[],                                                                                                                                          │ │
│ │          │   │   │   subgraph_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea860>                                                                    │ │
│ │          │   │   ),                                                                                                                                                      │ │
│ │          │   │   '__pregel_previous': None,                                                                                                                              │ │
│ │          │   │   ... +1                                                                                                                                                  │ │
│ │          │   }                                                                                                                                                           │ │
│ │          }                                                                                                                                                               │ │
│ │  input = ChatPromptValue(                                                                                                                                                │ │
│ │          │   messages=[                                                                                                                                                  │ │
│ │          │   │   SystemMessage(                                                                                                                                          │ │
│ │          │   │   │   content='You are a helpful AI economist working inside a multi-agent desk. You can call: '+2229,                                                    │ │
│ │          │   │   │   additional_kwargs={},                                                                                                                               │ │
│ │          │   │   │   response_metadata={}                                                                                                                                │ │
│ │          │   │   ),                                                                                                                                                      │ │
│ │          │   │   HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')                                     │ │
│ │          │   ]                                                                                                                                                           │ │
│ │          )                                                                                                                                                               │ │
│ │ kwargs = {}                                                                                                                                                              │ │
│ │   self = RunnableBinding(                                                                                                                                                │ │
│ │          │   bound=CostTrackingChatOpenAI(                                                                                                                               │ │
│ │          │   │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,                                                               │ │
│ │          │   │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>,                                                    │ │
│ │          │   │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                                                                      │ │
│ │          │   │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                                                                           │ │
│ │          │   │   model_name='gpt-5.1',                                                                                                                                   │ │
│ │          │   │   model_kwargs={},                                                                                                                                        │ │
│ │          │   │   openai_api_key=SecretStr('**********'),                                                                                                                 │ │
│ │          │   │   openai_api_base='https://api.openai.com/v1'                                                                                                             │ │
│ │          │   ),                                                                                                                                                          │ │
│ │          │   kwargs={                                                                                                                                                    │ │
│ │          │   │   'tools': [                                                                                                                                              │ │
│ │          │   │   │   {                                                                                                                                                   │ │
│ │          │   │   │   │   'type': 'function',                                                                                                                             │ │
│ │          │   │   │   │   'function': {                                                                                                                                   │ │
│ │          │   │   │   │   │   'name': 'get_global_news',                                                                                                                  │ │
│ │          │   │   │   │   │   'description': 'Retrieve global news data.\nUses the configured news_data vendor.\nArgs:\n    curr_'+242,                                   │ │
│ │          │   │   │   │   │   'parameters': {                                                                                                                             │ │
│ │          │   │   │   │   │   │   'properties': {                                                                                                                         │ │
│ │          │   │   │   │   │   │   │   'curr_date': {'description': 'Current date in yyyy-mm-dd format', 'type': 'string'},                                                │ │
│ │          │   │   │   │   │   │   │   'look_back_days': {'default': 7, 'description': 'Number of days to look back', 'type': 'integer'},                                  │ │
│ │          │   │   │   │   │   │   │   'limit': {'default': 5, 'description': 'Maximum number of articles to return', 'type': 'integer'}                                   │ │
│ │          │   │   │   │   │   │   },                                                                                                                                      │ │
│ │          │   │   │   │   │   │   'required': ['curr_date'],                                                                                                              │ │
│ │          │   │   │   │   │   │   'type': 'object'                                                                                                                        │ │
│ │          │   │   │   │   │   }                                                                                                                                           │ │
│ │          │   │   │   │   }                                                                                                                                               │ │
│ │          │   │   │   },                                                                                                                                                  │ │
│ │          │   │   │   {                                                                                                                                                   │ │
│ │          │   │   │   │   'type': 'function',                                                                                                                             │ │
│ │          │   │   │   │   'function': {                                                                                                                                   │ │
│ │          │   │   │   │   │   'name': 'get_news',                                                                                                                         │ │
│ │          │   │   │   │   │   'description': 'Retrieve news data for a given ticker symbol.\nUses the configured news_data vend'+203,                                     │ │
│ │          │   │   │   │   │   'parameters': {                                                                                                                             │ │
│ │          │   │   │   │   │   │   'properties': {                                                                                                                         │ │
│ │          │   │   │   │   │   │   │   'ticker': {'description': 'Ticker symbol', 'type': 'string'},                                                                       │ │
│ │          │   │   │   │   │   │   │   'start_date': {'description': 'Start date in yyyy-mm-dd format', 'type': 'string'},                                                 │ │
│ │          │   │   │   │   │   │   │   'end_date': {'description': 'End date in yyyy-mm-dd format', 'type': 'string'}                                                      │ │
│ │          │   │   │   │   │   │   },                                                                                                                                      │ │
│ │          │   │   │   │   │   │   'required': ['ticker', 'start_date', 'end_date'],                                                                                       │ │
│ │          │   │   │   │   │   │   'type': 'object'                                                                                                                        │ │
│ │          │   │   │   │   │   }                                                                                                                                           │ │
│ │          │   │   │   │   }                                                                                                                                               │ │
│ │          │   │   │   }                                                                                                                                                   │ │
│ │          │   │   ]                                                                                                                                                       │ │
│ │          │   },                                                                                                                                                          │ │
│ │          │   config={},                                                                                                                                                  │ │
│ │          │   config_factories=[]                                                                                                                                         │ │
│ │          )                                                                                                                                                               │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/langchain_core/language_models/chat_models.py:372 in invoke                                         │
│                                                                                                                                                                              │
│    369 │   │   config = ensure_config(config)                                                                                                                                │
│    370 │   │   return cast(                                                                                                                                                  │
│    371 │   │   │   "ChatGeneration",                                                                                                                                         │
│ ❱  372 │   │   │   self.generate_prompt(                                                                                                                                     │
│    373 │   │   │   │   [self._convert_input(input)],                                                                                                                         │
│    374 │   │   │   │   stop=stop,                                                                                                                                            │
│    375 │   │   │   │   callbacks=config.get("callbacks"),                                                                                                                    │
│                                                                                                                                                                              │
│ ╭───────────────────────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────────────────────╮ │
│ │ config = {                                                                                                                                                               │ │
│ │          │   'tags': [],                                                                                                                                                 │ │
│ │          │   'metadata': {                                                                                                                                               │ │
│ │          │   │   'langgraph_step': 1,                                                                                                                                    │ │
│ │          │   │   'langgraph_node': 'Macro Economist',                                                                                                                    │ │
│ │          │   │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                                                   │ │
│ │          │   │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                                                 │ │
│ │          │   │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                      │ │
│ │          │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08'                                                                                 │ │
│ │          │   },                                                                                                                                                          │ │
│ │          │   'callbacks': <langchain_core.callbacks.manager.CallbackManager object at 0x123aeaad0>,                                                                      │ │
│ │          │   'recursion_limit': 100,                                                                                                                                     │ │
│ │          │   'configurable': {                                                                                                                                           │ │
│ │          │   │   '__pregel_task_id': '42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                             │ │
│ │          │   │   '__pregel_send': <built-in method extend of collections.deque object at 0x123c24520>,                                                                   │ │
│ │          │   │   '__pregel_read': functools.partial(<function local_read at 0x104a7e0e0>, {'messages': <langgraph.channels.binop.BinaryOperatorAggregate object at       │ │
│ │          0x123adeec0>, 'company_of_interest': <langgraph.channels.last_value.LastValue object at 0x123adf000>, 'trade_date': <langgraph.channels.last_value.LastValue    │ │
│ │          object at 0x123ae0300>, 'sender': <langgraph.channels.last_value.LastValue object at 0x123adef40>, 'market_report': <langgraph.channels.last_value.LastValue    │ │
│ │          object at 0x123add4c0>, 'sentiment_report': <langgraph.channels.last_value.LastValue object at 0x123adc5c0>, 'news_report':                                     │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123ade0c0>, 'fundamentals_report': <langgraph.channels.last_value.LastValue object at 0x123adfc40>,        │ │
│ │          'macro_report': <langgraph.channels.last_value.LastValue object at 0x123adee40>, 'alternative_data_report': <langgraph.channels.last_value.LastValue object at  │ │
│ │          0x123adf7c0>, 'investment_debate_state': <langgraph.channels.last_value.LastValue object at 0x123adf9c0>, 'investment_plan':                                    │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123adc8c0>, 'trader_investment_plan': <langgraph.channels.last_value.LastValue object at 0x123adf8c0>,     │ │
│ │          'risk_quant_report': <langgraph.channels.last_value.LastValue object at 0x123c08fc0>, 'risk_metrics_json': <langgraph.channels.last_value.LastValue object at   │ │
│ │          0x123c08700>, 'execution_plan': <langgraph.channels.last_value.LastValue object at 0x123c0b2c0>, 'risk_debate_state': <langgraph.channels.last_value.LastValue  │ │
│ │          object at 0x123c09040>, 'final_trade_decision': <langgraph.channels.last_value.LastValue object at 0x123c10b80>, 'compliance_report':                           │ │
│ │          <langgraph.channels.last_value.LastValue object at 0x123c10bc0>, 'compliance_status': <langgraph.channels.last_value.LastValue object at 0x123c10c00>,          │ │
│ │          'proposed_trade': <langgraph.channels.last_value.LastValue object at 0x123c10c40>, 'cost_statistics': <langgraph.channels.last_value.LastValue object at        │ │
│ │          0x123c10c80>, '__start__': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10cc0>, 'branch:to:Macro Economist':                              │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d00>, 'branch:to:Msg Clear Macro Economist':                                               │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10d40>, 'branch:to:tools_macro': <langgraph.channels.ephemeral_value.EphemeralValue object   │ │
│ │          at 0x123c10d80>, 'branch:to:Market Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10dc0>, 'branch:to:Msg Clear Market Analyst':   │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e00>, 'branch:to:tools_market': <langgraph.channels.ephemeral_value.EphemeralValue object  │ │
│ │          at 0x123c10e40>, 'branch:to:Social Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10e80>, 'branch:to:Msg Clear Social Analyst':   │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10ec0>, 'branch:to:tools_social': <langgraph.channels.ephemeral_value.EphemeralValue object  │ │
│ │          at 0x123c10f00>, 'branch:to:News Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f40>, 'branch:to:Msg Clear News Analyst':       │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c10f80>, 'branch:to:tools_news': <langgraph.channels.ephemeral_value.EphemeralValue object at │ │
│ │          0x123c10fc0>, 'branch:to:Fundamentals Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11000>, 'branch:to:Msg Clear Fundamentals    │ │
│ │          Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11040>, 'branch:to:tools_fundamentals':                                            │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11080>, 'branch:to:Alternative Data Analyst':                                                │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c110c0>, 'branch:to:Msg Clear Alternative Data Analyst':                                      │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11100>, 'branch:to:tools_alternative': <langgraph.channels.ephemeral_value.EphemeralValue    │ │
│ │          object at 0x123c11140>, 'branch:to:Bull Researcher': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11180>, 'branch:to:Bear Researcher':    │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c111c0>, 'branch:to:Research Manager': <langgraph.channels.ephemeral_value.EphemeralValue     │ │
│ │          object at 0x123c11200>, 'branch:to:Trader': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11240>, 'branch:to:Risk Quant Analyst':          │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11280>, 'branch:to:Risky Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object │ │
│ │          at 0x123c112c0>, 'branch:to:Neutral Analyst': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11300>, 'branch:to:Safe Analyst':              │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11340>, 'branch:to:Risk Judge': <langgraph.channels.ephemeral_value.EphemeralValue object at │ │
│ │          0x123c11380>, 'branch:to:Execution Strategist': <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c113c0>, 'branch:to:Compliance Officer':      │ │
│ │          <langgraph.channels.ephemeral_value.EphemeralValue object at 0x123c11400>}, {}, PregelTaskWrites(path=('__pregel_pull', 'Macro Economist'), name='Macro         │ │
│ │          Economist', writes=deque([('__error__', AttributeError("'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'"))]), triggers=('branch:to:Macro       │ │
│ │          Economist',))),                                                                                                                                                 │ │
│ │          │   │   '__pregel_store': None,                                                                                                                                 │ │
│ │          │   │   '__pregel_checkpointer': None,                                                                                                                          │ │
│ │          │   │   'checkpoint_map': {'': '1f0c2acd-176c-6a18-8000-0f50a9acbb05'},                                                                                         │ │
│ │          │   │   'checkpoint_id': None,                                                                                                                                  │ │
│ │          │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                                                │ │
│ │          │   │   '__pregel_scratchpad': PregelScratchpad(                                                                                                                │ │
│ │          │   │   │   call_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea680>,                                                                       │ │
│ │          │   │   │   interrupt_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea6b0>,                                                                  │ │
│ │          │   │   │   get_null_resume=<function _scratchpad.<locals>.get_null_resume at 0x123ad2680>,                                                                     │ │
│ │          │   │   │   resume=[],                                                                                                                                          │ │
│ │          │   │   │   subgraph_counter=<langgraph.pregel.algo.LazyAtomicCounter object at 0x123aea860>                                                                    │ │
│ │          │   │   ),                                                                                                                                                      │ │
│ │          │   │   '__pregel_previous': None,                                                                                                                              │ │
│ │          │   │   ... +1                                                                                                                                                  │ │
│ │          │   }                                                                                                                                                           │ │
│ │          }                                                                                                                                                               │ │
│ │  input = ChatPromptValue(                                                                                                                                                │ │
│ │          │   messages=[                                                                                                                                                  │ │
│ │          │   │   SystemMessage(                                                                                                                                          │ │
│ │          │   │   │   content='You are a helpful AI economist working inside a multi-agent desk. You can call: '+2229,                                                    │ │
│ │          │   │   │   additional_kwargs={},                                                                                                                               │ │
│ │          │   │   │   response_metadata={}                                                                                                                                │ │
│ │          │   │   ),                                                                                                                                                      │ │
│ │          │   │   HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')                                     │ │
│ │          │   ]                                                                                                                                                           │ │
│ │          )                                                                                                                                                               │ │
│ │ kwargs = {                                                                                                                                                               │ │
│ │          │   'tools': [                                                                                                                                                  │ │
│ │          │   │   {                                                                                                                                                       │ │
│ │          │   │   │   'type': 'function',                                                                                                                                 │ │
│ │          │   │   │   'function': {                                                                                                                                       │ │
│ │          │   │   │   │   'name': 'get_global_news',                                                                                                                      │ │
│ │          │   │   │   │   'description': 'Retrieve global news data.\nUses the configured news_data vendor.\nArgs:\n    curr_'+242,                                       │ │
│ │          │   │   │   │   'parameters': {                                                                                                                                 │ │
│ │          │   │   │   │   │   'properties': {                                                                                                                             │ │
│ │          │   │   │   │   │   │   'curr_date': {'description': 'Current date in yyyy-mm-dd format', 'type': 'string'},                                                    │ │
│ │          │   │   │   │   │   │   'look_back_days': {'default': 7, 'description': 'Number of days to look back', 'type': 'integer'},                                      │ │
│ │          │   │   │   │   │   │   'limit': {'default': 5, 'description': 'Maximum number of articles to return', 'type': 'integer'}                                       │ │
│ │          │   │   │   │   │   },                                                                                                                                          │ │
│ │          │   │   │   │   │   'required': ['curr_date'],                                                                                                                  │ │
│ │          │   │   │   │   │   'type': 'object'                                                                                                                            │ │
│ │          │   │   │   │   }                                                                                                                                               │ │
│ │          │   │   │   }                                                                                                                                                   │ │
│ │          │   │   },                                                                                                                                                      │ │
│ │          │   │   {                                                                                                                                                       │ │
│ │          │   │   │   'type': 'function',                                                                                                                                 │ │
│ │          │   │   │   'function': {                                                                                                                                       │ │
│ │          │   │   │   │   'name': 'get_news',                                                                                                                             │ │
│ │          │   │   │   │   'description': 'Retrieve news data for a given ticker symbol.\nUses the configured news_data vend'+203,                                         │ │
│ │          │   │   │   │   'parameters': {                                                                                                                                 │ │
│ │          │   │   │   │   │   'properties': {                                                                                                                             │ │
│ │          │   │   │   │   │   │   'ticker': {'description': 'Ticker symbol', 'type': 'string'},                                                                           │ │
│ │          │   │   │   │   │   │   'start_date': {'description': 'Start date in yyyy-mm-dd format', 'type': 'string'},                                                     │ │
│ │          │   │   │   │   │   │   'end_date': {'description': 'End date in yyyy-mm-dd format', 'type': 'string'}                                                          │ │
│ │          │   │   │   │   │   },                                                                                                                                          │ │
│ │          │   │   │   │   │   'required': ['ticker', 'start_date', 'end_date'],                                                                                           │ │
│ │          │   │   │   │   │   'type': 'object'                                                                                                                            │ │
│ │          │   │   │   │   }                                                                                                                                               │ │
│ │          │   │   │   }                                                                                                                                                   │ │
│ │          │   │   }                                                                                                                                                       │ │
│ │          │   ]                                                                                                                                                           │ │
│ │          }                                                                                                                                                               │ │
│ │   self = CostTrackingChatOpenAI(                                                                                                                                         │ │
│ │          │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,                                                                   │ │
│ │          │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>,                                                        │ │
│ │          │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                                                                          │ │
│ │          │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                                                                               │ │
│ │          │   model_name='gpt-5.1',                                                                                                                                       │ │
│ │          │   model_kwargs={},                                                                                                                                            │ │
│ │          │   openai_api_key=SecretStr('**********'),                                                                                                                     │ │
│ │          │   openai_api_base='https://api.openai.com/v1'                                                                                                                 │ │
│ │          )                                                                                                                                                               │ │
│ │   stop = None                                                                                                                                                            │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/langchain_core/language_models/chat_models.py:957 in generate_prompt                                │
│                                                                                                                                                                              │
│    954 │   │   **kwargs: Any,                                                                                                                                                │
│    955 │   ) -> LLMResult:                                                                                                                                                   │
│    956 │   │   prompt_messages = [p.to_messages() for p in prompts]                                                                                                          │
│ ❱  957 │   │   return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)                                                                               │
│    958 │                                                                                                                                                                     │
│    959 │   @override                                                                                                                                                         │
│    960 │   async def agenerate_prompt(                                                                                                                                       │
│                                                                                                                                                                              │
│ ╭───────────────────────────────────────────────────────────────────── locals ──────────────────────────────────────────────────────────────────────╮                        │
│ │       callbacks = <langchain_core.callbacks.manager.CallbackManager object at 0x123aeaad0>                                                        │                        │
│ │          kwargs = {                                                                                                                               │                        │
│ │                   │   'tags': [],                                                                                                                 │                        │
│ │                   │   'metadata': {                                                                                                               │                        │
│ │                   │   │   'langgraph_step': 1,                                                                                                    │                        │
│ │                   │   │   'langgraph_node': 'Macro Economist',                                                                                    │                        │
│ │                   │   │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                   │                        │
│ │                   │   │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                 │                        │
│ │                   │   │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                      │                        │
│ │                   │   │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08'                                                 │                        │
│ │                   │   },                                                                                                                          │                        │
│ │                   │   'run_name': None,                                                                                                           │                        │
│ │                   │   'run_id': None,                                                                                                             │                        │
│ │                   │   'tools': [                                                                                                                  │                        │
│ │                   │   │   {                                                                                                                       │                        │
│ │                   │   │   │   'type': 'function',                                                                                                 │                        │
│ │                   │   │   │   'function': {                                                                                                       │                        │
│ │                   │   │   │   │   'name': 'get_global_news',                                                                                      │                        │
│ │                   │   │   │   │   'description': 'Retrieve global news data.\nUses the configured news_data vendor.\nArgs:\n    curr_'+242,       │                        │
│ │                   │   │   │   │   'parameters': {                                                                                                 │                        │
│ │                   │   │   │   │   │   'properties': {                                                                                             │                        │
│ │                   │   │   │   │   │   │   'curr_date': {'description': 'Current date in yyyy-mm-dd format', 'type': 'string'},                    │                        │
│ │                   │   │   │   │   │   │   'look_back_days': {'default': 7, 'description': 'Number of days to look back', 'type': 'integer'},      │                        │
│ │                   │   │   │   │   │   │   'limit': {'default': 5, 'description': 'Maximum number of articles to return', 'type': 'integer'}       │                        │
│ │                   │   │   │   │   │   },                                                                                                          │                        │
│ │                   │   │   │   │   │   'required': ['curr_date'],                                                                                  │                        │
│ │                   │   │   │   │   │   'type': 'object'                                                                                            │                        │
│ │                   │   │   │   │   }                                                                                                               │                        │
│ │                   │   │   │   }                                                                                                                   │                        │
│ │                   │   │   },                                                                                                                      │                        │
│ │                   │   │   {                                                                                                                       │                        │
│ │                   │   │   │   'type': 'function',                                                                                                 │                        │
│ │                   │   │   │   'function': {                                                                                                       │                        │
│ │                   │   │   │   │   'name': 'get_news',                                                                                             │                        │
│ │                   │   │   │   │   'description': 'Retrieve news data for a given ticker symbol.\nUses the configured news_data vend'+203,         │                        │
│ │                   │   │   │   │   'parameters': {                                                                                                 │                        │
│ │                   │   │   │   │   │   'properties': {                                                                                             │                        │
│ │                   │   │   │   │   │   │   'ticker': {'description': 'Ticker symbol', 'type': 'string'},                                           │                        │
│ │                   │   │   │   │   │   │   'start_date': {'description': 'Start date in yyyy-mm-dd format', 'type': 'string'},                     │                        │
│ │                   │   │   │   │   │   │   'end_date': {'description': 'End date in yyyy-mm-dd format', 'type': 'string'}                          │                        │
│ │                   │   │   │   │   │   },                                                                                                          │                        │
│ │                   │   │   │   │   │   'required': ['ticker', 'start_date', 'end_date'],                                                           │                        │
│ │                   │   │   │   │   │   'type': 'object'                                                                                            │                        │
│ │                   │   │   │   │   }                                                                                                               │                        │
│ │                   │   │   │   }                                                                                                                   │                        │
│ │                   │   │   }                                                                                                                       │                        │
│ │                   │   ]                                                                                                                           │                        │
│ │                   }                                                                                                                               │                        │
│ │ prompt_messages = [                                                                                                                               │                        │
│ │                   │   [                                                                                                                           │                        │
│ │                   │   │   SystemMessage(                                                                                                          │                        │
│ │                   │   │   │   content='You are a helpful AI economist working inside a multi-agent desk. You can call: '+2229,                    │                        │
│ │                   │   │   │   additional_kwargs={},                                                                                               │                        │
│ │                   │   │   │   response_metadata={}                                                                                                │                        │
│ │                   │   │   ),                                                                                                                      │                        │
│ │                   │   │   HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')     │                        │
│ │                   │   ]                                                                                                                           │                        │
│ │                   ]                                                                                                                               │                        │
│ │         prompts = [                                                                                                                               │                        │
│ │                   │   ChatPromptValue(                                                                                                            │                        │
│ │                   │   │   messages=[                                                                                                              │                        │
│ │                   │   │   │   SystemMessage(                                                                                                      │                        │
│ │                   │   │   │   │   content='You are a helpful AI economist working inside a multi-agent desk. You can call: '+2229,                │                        │
│ │                   │   │   │   │   additional_kwargs={},                                                                                           │                        │
│ │                   │   │   │   │   response_metadata={}                                                                                            │                        │
│ │                   │   │   │   ),                                                                                                                  │                        │
│ │                   │   │   │   HumanMessage(                                                                                                       │                        │
│ │                   │   │   │   │   content='AAPL',                                                                                                 │                        │
│ │                   │   │   │   │   additional_kwargs={},                                                                                           │                        │
│ │                   │   │   │   │   response_metadata={},                                                                                           │                        │
│ │                   │   │   │   │   id='325a9eee-67db-450c-a845-f199d1d25042'                                                                       │                        │
│ │                   │   │   │   )                                                                                                                   │                        │
│ │                   │   │   ]                                                                                                                       │                        │
│ │                   │   )                                                                                                                           │                        │
│ │                   ]                                                                                                                               │                        │
│ │            self = CostTrackingChatOpenAI(                                                                                                         │                        │
│ │                   │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,                                   │                        │
│ │                   │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>,                        │                        │
│ │                   │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                                          │                        │
│ │                   │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                                               │                        │
│ │                   │   model_name='gpt-5.1',                                                                                                       │                        │
│ │                   │   model_kwargs={},                                                                                                            │                        │
│ │                   │   openai_api_key=SecretStr('**********'),                                                                                     │                        │
│ │                   │   openai_api_base='https://api.openai.com/v1'                                                                                 │                        │
│ │                   )                                                                                                                               │                        │
│ │            stop = None                                                                                                                            │                        │
│ ╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯                        │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/langchain_core/language_models/chat_models.py:776 in generate                                       │
│                                                                                                                                                                              │
│    773 │   │   for i, m in enumerate(input_messages):                                                                                                                        │
│    774 │   │   │   try:                                                                                                                                                      │
│    775 │   │   │   │   results.append(                                                                                                                                       │
│ ❱  776 │   │   │   │   │   self._generate_with_cache(                                                                                                                        │
│    777 │   │   │   │   │   │   m,                                                                                                                                            │
│    778 │   │   │   │   │   │   stop=stop,                                                                                                                                    │
│    779 │   │   │   │   │   │   run_manager=run_managers[i] if run_managers else None,                                                                                        │
│                                                                                                                                                                              │
│ ╭──────────────────────────────────────────────────────────────────────────── locals ────────────────────────────────────────────────────────────────────────────╮           │
│ │                 callback_manager = <langchain_core.callbacks.manager.CallbackManager object at 0x123aeb430>                                                    │           │
│ │                        callbacks = <langchain_core.callbacks.manager.CallbackManager object at 0x123aeaad0>                                                    │           │
│ │  generations_with_error_metadata = []                                                                                                                          │           │
│ │                                i = 0                                                                                                                           │           │
│ │             inheritable_metadata = {                                                                                                                           │           │
│ │                                    │   'langgraph_step': 1,                                                                                                    │           │
│ │                                    │   'langgraph_node': 'Macro Economist',                                                                                    │           │
│ │                                    │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                   │           │
│ │                                    │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                 │           │
│ │                                    │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                      │           │
│ │                                    │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                                │           │
│ │                                    │   'ls_provider': 'openai',                                                                                                │           │
│ │                                    │   'ls_model_name': 'gpt-5.1',                                                                                             │           │
│ │                                    │   'ls_model_type': 'chat',                                                                                                │           │
│ │                                    │   'ls_temperature': None                                                                                                  │           │
│ │                                    }                                                                                                                           │           │
│ │                   input_messages = [                                                                                                                           │           │
│ │                                    │   [                                                                                                                       │           │
│ │                                    │   │   SystemMessage(                                                                                                      │           │
│ │                                    │   │   │   content='You are a helpful AI economist working inside a multi-agent desk. You can call: '+2229,                │           │
│ │                                    │   │   │   additional_kwargs={},                                                                                           │           │
│ │                                    │   │   │   response_metadata={}                                                                                            │           │
│ │                                    │   │   ),                                                                                                                  │           │
│ │                                    │   │   HumanMessage(                                                                                                       │           │
│ │                                    │   │   │   content='AAPL',                                                                                                 │           │
│ │                                    │   │   │   additional_kwargs={},                                                                                           │           │
│ │                                    │   │   │   response_metadata={},                                                                                           │           │
│ │                                    │   │   │   id='325a9eee-67db-450c-a845-f199d1d25042'                                                                       │           │
│ │                                    │   │   )                                                                                                                   │           │
│ │                                    │   ]                                                                                                                       │           │
│ │                                    ]                                                                                                                           │           │
│ │                           kwargs = {                                                                                                                           │           │
│ │                                    │   'tools': [                                                                                                              │           │
│ │                                    │   │   {                                                                                                                   │           │
│ │                                    │   │   │   'type': 'function',                                                                                             │           │
│ │                                    │   │   │   'function': {                                                                                                   │           │
│ │                                    │   │   │   │   'name': 'get_global_news',                                                                                  │           │
│ │                                    │   │   │   │   'description': 'Retrieve global news data.\nUses the configured news_data vendor.\nArgs:\n    curr_'+242,   │           │
│ │                                    │   │   │   │   'parameters': {                                                                                             │           │
│ │                                    │   │   │   │   │   'properties': {                                                                                         │           │
│ │                                    │   │   │   │   │   │   'curr_date': {'description': 'Current date in yyyy-mm-dd format', 'type': 'string'},                │           │
│ │                                    │   │   │   │   │   │   'look_back_days': {'default': 7, 'description': 'Number of days to look back', 'type': 'integer'},  │           │
│ │                                    │   │   │   │   │   │   'limit': {'default': 5, 'description': 'Maximum number of articles to return', 'type': 'integer'}   │           │
│ │                                    │   │   │   │   │   },                                                                                                      │           │
│ │                                    │   │   │   │   │   'required': ['curr_date'],                                                                              │           │
│ │                                    │   │   │   │   │   'type': 'object'                                                                                        │           │
│ │                                    │   │   │   │   }                                                                                                           │           │
│ │                                    │   │   │   }                                                                                                               │           │
│ │                                    │   │   },                                                                                                                  │           │
│ │                                    │   │   {                                                                                                                   │           │
│ │                                    │   │   │   'type': 'function',                                                                                             │           │
│ │                                    │   │   │   'function': {                                                                                                   │           │
│ │                                    │   │   │   │   'name': 'get_news',                                                                                         │           │
│ │                                    │   │   │   │   'description': 'Retrieve news data for a given ticker symbol.\nUses the configured news_data vend'+203,     │           │
│ │                                    │   │   │   │   'parameters': {                                                                                             │           │
│ │                                    │   │   │   │   │   'properties': {                                                                                         │           │
│ │                                    │   │   │   │   │   │   'ticker': {'description': 'Ticker symbol', 'type': 'string'},                                       │           │
│ │                                    │   │   │   │   │   │   'start_date': {'description': 'Start date in yyyy-mm-dd format', 'type': 'string'},                 │           │
│ │                                    │   │   │   │   │   │   'end_date': {'description': 'End date in yyyy-mm-dd format', 'type': 'string'}                      │           │
│ │                                    │   │   │   │   │   },                                                                                                      │           │
│ │                                    │   │   │   │   │   'required': ['ticker', 'start_date', 'end_date'],                                                       │           │
│ │                                    │   │   │   │   │   'type': 'object'                                                                                        │           │
│ │                                    │   │   │   │   }                                                                                                           │           │
│ │                                    │   │   │   }                                                                                                               │           │
│ │                                    │   │   }                                                                                                                   │           │
│ │                                    │   ]                                                                                                                       │           │
│ │                                    }                                                                                                                           │           │
│ │      ls_structured_output_format = None                                                                                                                        │           │
│ │ ls_structured_output_format_dict = {}                                                                                                                          │           │
│ │                                m = [                                                                                                                           │           │
│ │                                    │   SystemMessage(                                                                                                          │           │
│ │                                    │   │   content='You are a helpful AI economist working inside a multi-agent desk. You can call: '+2229,                    │           │
│ │                                    │   │   additional_kwargs={},                                                                                               │           │
│ │                                    │   │   response_metadata={}                                                                                                │           │
│ │                                    │   ),                                                                                                                      │           │
│ │                                    │   HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')     │           │
│ │                                    ]                                                                                                                           │           │
│ │                         messages = [                                                                                                                           │           │
│ │                                    │   [                                                                                                                       │           │
│ │                                    │   │   SystemMessage(                                                                                                      │           │
│ │                                    │   │   │   content='You are a helpful AI economist working inside a multi-agent desk. You can call: '+2229,                │           │
│ │                                    │   │   │   additional_kwargs={},                                                                                           │           │
│ │                                    │   │   │   response_metadata={}                                                                                            │           │
│ │                                    │   │   ),                                                                                                                  │           │
│ │                                    │   │   HumanMessage(                                                                                                       │           │
│ │                                    │   │   │   content='AAPL',                                                                                                 │           │
│ │                                    │   │   │   additional_kwargs={},                                                                                           │           │
│ │                                    │   │   │   response_metadata={},                                                                                           │           │
│ │                                    │   │   │   id='325a9eee-67db-450c-a845-f199d1d25042'                                                                       │           │
│ │                                    │   │   )                                                                                                                   │           │
│ │                                    │   ]                                                                                                                       │           │
│ │                                    ]                                                                                                                           │           │
│ │                messages_to_trace = [                                                                                                                           │           │
│ │                                    │   [                                                                                                                       │           │
│ │                                    │   │   SystemMessage(                                                                                                      │           │
│ │                                    │   │   │   content='You are a helpful AI economist working inside a multi-agent desk. You can call: '+2229,                │           │
│ │                                    │   │   │   additional_kwargs={},                                                                                           │           │
│ │                                    │   │   │   response_metadata={}                                                                                            │           │
│ │                                    │   │   ),                                                                                                                  │           │
│ │                                    │   │   HumanMessage(                                                                                                       │           │
│ │                                    │   │   │   content='AAPL',                                                                                                 │           │
│ │                                    │   │   │   additional_kwargs={},                                                                                           │           │
│ │                                    │   │   │   response_metadata={},                                                                                           │           │
│ │                                    │   │   │   id='325a9eee-67db-450c-a845-f199d1d25042'                                                                       │           │
│ │                                    │   │   )                                                                                                                   │           │
│ │                                    │   ]                                                                                                                       │           │
│ │                                    ]                                                                                                                           │           │
│ │                         metadata = {                                                                                                                           │           │
│ │                                    │   'langgraph_step': 1,                                                                                                    │           │
│ │                                    │   'langgraph_node': 'Macro Economist',                                                                                    │           │
│ │                                    │   'langgraph_triggers': ('branch:to:Macro Economist',),                                                                   │           │
│ │                                    │   'langgraph_path': ('__pregel_pull', 'Macro Economist'),                                                                 │           │
│ │                                    │   'langgraph_checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08',                                      │           │
│ │                                    │   'checkpoint_ns': 'Macro Economist:42d81dba-9acd-c425-a566-dee537a8ca08'                                                 │           │
│ │                                    }                                                                                                                           │           │
│ │                          options = {'stop': None}                                                                                                              │           │
│ │                           params = {                                                                                                                           │           │
│ │                                    │   'model': 'gpt-5.1',                                                                                                     │           │
│ │                                    │   'model_name': 'gpt-5.1',                                                                                                │           │
│ │                                    │   'stream': False,                                                                                                        │           │
│ │                                    │   '_type': 'openai-chat',                                                                                                 │           │
│ │                                    │   'stop': None,                                                                                                           │           │
│ │                                    │   'tools': [                                                                                                              │           │
│ │                                    │   │   {                                                                                                                   │           │
│ │                                    │   │   │   'type': 'function',                                                                                             │           │
│ │                                    │   │   │   'function': {                                                                                                   │           │
│ │                                    │   │   │   │   'name': 'get_global_news',                                                                                  │           │
│ │                                    │   │   │   │   'description': 'Retrieve global news data.\nUses the configured news_data vendor.\nArgs:\n    curr_'+242,   │           │
│ │                                    │   │   │   │   'parameters': {                                                                                             │           │
│ │                                    │   │   │   │   │   'properties': {                                                                                         │           │
│ │                                    │   │   │   │   │   │   'curr_date': {'description': 'Current date in yyyy-mm-dd format', 'type': 'string'},                │           │
│ │                                    │   │   │   │   │   │   'look_back_days': {'default': 7, 'description': 'Number of days to look back', 'type': 'integer'},  │           │
│ │                                    │   │   │   │   │   │   'limit': {'default': 5, 'description': 'Maximum number of articles to return', 'type': 'integer'}   │           │
│ │                                    │   │   │   │   │   },                                                                                                      │           │
│ │                                    │   │   │   │   │   'required': ['curr_date'],                                                                              │           │
│ │                                    │   │   │   │   │   'type': 'object'                                                                                        │           │
│ │                                    │   │   │   │   }                                                                                                           │           │
│ │                                    │   │   │   }                                                                                                               │           │
│ │                                    │   │   },                                                                                                                  │           │
│ │                                    │   │   {                                                                                                                   │           │
│ │                                    │   │   │   'type': 'function',                                                                                             │           │
│ │                                    │   │   │   'function': {                                                                                                   │           │
│ │                                    │   │   │   │   'name': 'get_news',                                                                                         │           │
│ │                                    │   │   │   │   'description': 'Retrieve news data for a given ticker symbol.\nUses the configured news_data vend'+203,     │           │
│ │                                    │   │   │   │   'parameters': {                                                                                             │           │
│ │                                    │   │   │   │   │   'properties': {                                                                                         │           │
│ │                                    │   │   │   │   │   │   'ticker': {'description': 'Ticker symbol', 'type': 'string'},                                       │           │
│ │                                    │   │   │   │   │   │   'start_date': {'description': 'Start date in yyyy-mm-dd format', 'type': 'string'},                 │           │
│ │                                    │   │   │   │   │   │   'end_date': {'description': 'End date in yyyy-mm-dd format', 'type': 'string'}                      │           │
│ │                                    │   │   │   │   │   },                                                                                                      │           │
│ │                                    │   │   │   │   │   'required': ['ticker', 'start_date', 'end_date'],                                                       │           │
│ │                                    │   │   │   │   │   'type': 'object'                                                                                        │           │
│ │                                    │   │   │   │   }                                                                                                           │           │
│ │                                    │   │   │   }                                                                                                               │           │
│ │                                    │   │   }                                                                                                                   │           │
│ │                                    │   ]                                                                                                                       │           │
│ │                                    }                                                                                                                           │           │
│ │                          results = []                                                                                                                          │           │
│ │                           run_id = None                                                                                                                        │           │
│ │                     run_managers = [<langchain_core.callbacks.manager.CallbackManagerForLLMRun object at 0x123aeb370>]                                         │           │
│ │                         run_name = None                                                                                                                        │           │
│ │                             self = CostTrackingChatOpenAI(                                                                                                     │           │
│ │                                    │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,                               │           │
│ │                                    │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>,                    │           │
│ │                                    │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                                      │           │
│ │                                    │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                                           │           │
│ │                                    │   model_name='gpt-5.1',                                                                                                   │           │
│ │                                    │   model_kwargs={},                                                                                                        │           │
│ │                                    │   openai_api_key=SecretStr('**********'),                                                                                 │           │
│ │                                    │   openai_api_base='https://api.openai.com/v1'                                                                             │           │
│ │                                    )                                                                                                                           │           │
│ │                             stop = None                                                                                                                        │           │
│ │                             tags = []                                                                                                                          │           │
│ ╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯           │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/langchain_core/language_models/chat_models.py:1026 in _generate_with_cache                          │
│                                                                                                                                                                              │
│   1023 │   │   │   │   messages, stop=stop, run_manager=run_manager, **kwargs                                                                                                │
│   1024 │   │   │   )                                                                                                                                                         │
│   1025 │   │   else:                                                                                                                                                         │
│ ❱ 1026 │   │   │   result = self._generate(messages, stop=stop, **kwargs)                                                                                                    │
│   1027 │   │                                                                                                                                                                 │
│   1028 │   │   # Add response metadata to each generation                                                                                                                    │
│   1029 │   │   for idx, generation in enumerate(result.generations):                                                                                                         │
│                                                                                                                                                                              │
│ ╭───────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────╮                                 │
│ │ check_cache = True                                                                                                                       │                                 │
│ │      kwargs = {                                                                                                                          │                                 │
│ │               │   'tools': [                                                                                                             │                                 │
│ │               │   │   {                                                                                                                  │                                 │
│ │               │   │   │   'type': 'function',                                                                                            │                                 │
│ │               │   │   │   'function': {                                                                                                  │                                 │
│ │               │   │   │   │   'name': 'get_global_news',                                                                                 │                                 │
│ │               │   │   │   │   'description': 'Retrieve global news data.\nUses the configured news_data vendor.\nArgs:\n    curr_'+242,  │                                 │
│ │               │   │   │   │   'parameters': {                                                                                            │                                 │
│ │               │   │   │   │   │   'properties': {                                                                                        │                                 │
│ │               │   │   │   │   │   │   'curr_date': {'description': 'Current date in yyyy-mm-dd format', 'type': 'string'},               │                                 │
│ │               │   │   │   │   │   │   'look_back_days': {                                                                                │                                 │
│ │               │   │   │   │   │   │   │   'default': 7,                                                                                  │                                 │
│ │               │   │   │   │   │   │   │   'description': 'Number of days to look back',                                                  │                                 │
│ │               │   │   │   │   │   │   │   'type': 'integer'                                                                              │                                 │
│ │               │   │   │   │   │   │   },                                                                                                 │                                 │
│ │               │   │   │   │   │   │   'limit': {                                                                                         │                                 │
│ │               │   │   │   │   │   │   │   'default': 5,                                                                                  │                                 │
│ │               │   │   │   │   │   │   │   'description': 'Maximum number of articles to return',                                         │                                 │
│ │               │   │   │   │   │   │   │   'type': 'integer'                                                                              │                                 │
│ │               │   │   │   │   │   │   }                                                                                                  │                                 │
│ │               │   │   │   │   │   },                                                                                                     │                                 │
│ │               │   │   │   │   │   'required': ['curr_date'],                                                                             │                                 │
│ │               │   │   │   │   │   'type': 'object'                                                                                       │                                 │
│ │               │   │   │   │   }                                                                                                          │                                 │
│ │               │   │   │   }                                                                                                              │                                 │
│ │               │   │   },                                                                                                                 │                                 │
│ │               │   │   {                                                                                                                  │                                 │
│ │               │   │   │   'type': 'function',                                                                                            │                                 │
│ │               │   │   │   'function': {                                                                                                  │                                 │
│ │               │   │   │   │   'name': 'get_news',                                                                                        │                                 │
│ │               │   │   │   │   'description': 'Retrieve news data for a given ticker symbol.\nUses the configured news_data vend'+203,    │                                 │
│ │               │   │   │   │   'parameters': {                                                                                            │                                 │
│ │               │   │   │   │   │   'properties': {                                                                                        │                                 │
│ │               │   │   │   │   │   │   'ticker': {'description': 'Ticker symbol', 'type': 'string'},                                      │                                 │
│ │               │   │   │   │   │   │   'start_date': {'description': 'Start date in yyyy-mm-dd format', 'type': 'string'},                │                                 │
│ │               │   │   │   │   │   │   'end_date': {'description': 'End date in yyyy-mm-dd format', 'type': 'string'}                     │                                 │
│ │               │   │   │   │   │   },                                                                                                     │                                 │
│ │               │   │   │   │   │   'required': ['ticker', 'start_date', 'end_date'],                                                      │                                 │
│ │               │   │   │   │   │   'type': 'object'                                                                                       │                                 │
│ │               │   │   │   │   }                                                                                                          │                                 │
│ │               │   │   │   }                                                                                                              │                                 │
│ │               │   │   }                                                                                                                  │                                 │
│ │               │   ]                                                                                                                      │                                 │
│ │               }                                                                                                                          │                                 │
│ │   llm_cache = None                                                                                                                       │                                 │
│ │    messages = [                                                                                                                          │                                 │
│ │               │   SystemMessage(                                                                                                         │                                 │
│ │               │   │   content='You are a helpful AI economist working inside a multi-agent desk. You can call: '+2229,                   │                                 │
│ │               │   │   additional_kwargs={},                                                                                              │                                 │
│ │               │   │   response_metadata={}                                                                                               │                                 │
│ │               │   ),                                                                                                                     │                                 │
│ │               │   HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')    │                                 │
│ │               ]                                                                                                                          │                                 │
│ │ run_manager = <langchain_core.callbacks.manager.CallbackManagerForLLMRun object at 0x123aeb370>                                          │                                 │
│ │        self = CostTrackingChatOpenAI(                                                                                                    │                                 │
│ │               │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,                              │                                 │
│ │               │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>,                   │                                 │
│ │               │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                                     │                                 │
│ │               │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                                          │                                 │
│ │               │   model_name='gpt-5.1',                                                                                                  │                                 │
│ │               │   model_kwargs={},                                                                                                       │                                 │
│ │               │   openai_api_key=SecretStr('**********'),                                                                                │                                 │
│ │               │   openai_api_base='https://api.openai.com/v1'                                                                            │                                 │
│ │               )                                                                                                                          │                                 │
│ │        stop = None                                                                                                                       │                                 │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯                                 │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/tradingagents/metrics/cost_tracker.py:132 in _generate                                                                                 │
│                                                                                                                                                                              │
│   129 │                                                                                                                                                                      │
│   130 │   def _generate(self, *args: Any, **kwargs: Any) -> ChatResult:  # type: ignore[overri                                                                               │
│   131 │   │   result = super()._generate(*args, **kwargs)                                                                                                                    │
│ ❱ 132 │   │   self._record_costs(result)                                                                                                                                     │
│   133 │   │   return result                                                                                                                                                  │
│   134 │                                                                                                                                                                      │
│   135 │   async def _agenerate(self, *args: Any, **kwargs: Any) -> ChatResult:  # type: ignore                                                                               │
│                                                                                                                                                                              │
│ ╭──────────────────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────────────────╮          │
│ │   args = (                                                                                                                                                      │          │
│ │          │   [                                                                                                                                                  │          │
│ │          │   │   SystemMessage(                                                                                                                                 │          │
│ │          │   │   │   content='You are a helpful AI economist working inside a multi-agent desk. You can call: '+2229,                                           │          │
│ │          │   │   │   additional_kwargs={},                                                                                                                      │          │
│ │          │   │   │   response_metadata={}                                                                                                                       │          │
│ │          │   │   ),                                                                                                                                             │          │
│ │          │   │   HumanMessage(content='AAPL', additional_kwargs={}, response_metadata={}, id='325a9eee-67db-450c-a845-f199d1d25042')                            │          │
│ │          │   ],                                                                                                                                                 │          │
│ │          )                                                                                                                                                      │          │
│ │ kwargs = {                                                                                                                                                      │          │
│ │          │   'stop': None,                                                                                                                                      │          │
│ │          │   'tools': [                                                                                                                                         │          │
│ │          │   │   {                                                                                                                                              │          │
│ │          │   │   │   'type': 'function',                                                                                                                        │          │
│ │          │   │   │   'function': {                                                                                                                              │          │
│ │          │   │   │   │   'name': 'get_global_news',                                                                                                             │          │
│ │          │   │   │   │   'description': 'Retrieve global news data.\nUses the configured news_data vendor.\nArgs:\n    curr_'+242,                              │          │
│ │          │   │   │   │   'parameters': {                                                                                                                        │          │
│ │          │   │   │   │   │   'properties': {                                                                                                                    │          │
│ │          │   │   │   │   │   │   'curr_date': {'description': 'Current date in yyyy-mm-dd format', 'type': 'string'},                                           │          │
│ │          │   │   │   │   │   │   'look_back_days': {'default': 7, 'description': 'Number of days to look back', 'type': 'integer'},                             │          │
│ │          │   │   │   │   │   │   'limit': {'default': 5, 'description': 'Maximum number of articles to return', 'type': 'integer'}                              │          │
│ │          │   │   │   │   │   },                                                                                                                                 │          │
│ │          │   │   │   │   │   'required': ['curr_date'],                                                                                                         │          │
│ │          │   │   │   │   │   'type': 'object'                                                                                                                   │          │
│ │          │   │   │   │   }                                                                                                                                      │          │
│ │          │   │   │   }                                                                                                                                          │          │
│ │          │   │   },                                                                                                                                             │          │
│ │          │   │   {                                                                                                                                              │          │
│ │          │   │   │   'type': 'function',                                                                                                                        │          │
│ │          │   │   │   'function': {                                                                                                                              │          │
│ │          │   │   │   │   'name': 'get_news',                                                                                                                    │          │
│ │          │   │   │   │   'description': 'Retrieve news data for a given ticker symbol.\nUses the configured news_data vend'+203,                                │          │
│ │          │   │   │   │   'parameters': {                                                                                                                        │          │
│ │          │   │   │   │   │   'properties': {                                                                                                                    │          │
│ │          │   │   │   │   │   │   'ticker': {'description': 'Ticker symbol', 'type': 'string'},                                                                  │          │
│ │          │   │   │   │   │   │   'start_date': {'description': 'Start date in yyyy-mm-dd format', 'type': 'string'},                                            │          │
│ │          │   │   │   │   │   │   'end_date': {'description': 'End date in yyyy-mm-dd format', 'type': 'string'}                                                 │          │
│ │          │   │   │   │   │   },                                                                                                                                 │          │
│ │          │   │   │   │   │   'required': ['ticker', 'start_date', 'end_date'],                                                                                  │          │
│ │          │   │   │   │   │   'type': 'object'                                                                                                                   │          │
│ │          │   │   │   │   }                                                                                                                                      │          │
│ │          │   │   │   }                                                                                                                                          │          │
│ │          │   │   }                                                                                                                                              │          │
│ │          │   ]                                                                                                                                                  │          │
│ │          }                                                                                                                                                      │          │
│ │ result = ChatResult(                                                                                                                                            │          │
│ │          │   generations=[                                                                                                                                      │          │
│ │          │   │   ChatGeneration(                                                                                                                                │          │
│ │          │   │   │   generation_info={'finish_reason': 'tool_calls', 'logprobs': None},                                                                         │          │
│ │          │   │   │   message=AIMessage(                                                                                                                         │          │
│ │          │   │   │   │   content='',                                                                                                                            │          │
│ │          │   │   │   │   additional_kwargs={                                                                                                                    │          │
│ │          │   │   │   │   │   'tool_calls': [                                                                                                                    │          │
│ │          │   │   │   │   │   │   {                                                                                                                              │          │
│ │          │   │   │   │   │   │   │   'id': 'call_hB2az7UhqpSe6M07Nju0gOSP',                                                                                     │          │
│ │          │   │   │   │   │   │   │   'function': {'arguments': '{"curr_date": "2025-11-16", "look_back_days": 10, "limit": 10}', 'name': 'get_global_news'},    │          │
│ │          │   │   │   │   │   │   │   'type': 'function'                                                                                                         │          │
│ │          │   │   │   │   │   │   },                                                                                                                             │          │
│ │          │   │   │   │   │   │   {                                                                                                                              │          │
│ │          │   │   │   │   │   │   │   'id': 'call_C5liz770aNixGpQ6kQkcidXt',                                                                                     │          │
│ │          │   │   │   │   │   │   │   'function': {                                                                                                              │          │
│ │          │   │   │   │   │   │   │   │   'arguments': '{"ticker": "AAPL", "start_date": "2025-11-01", "end_date": "2025-11-16"}',                               │          │
│ │          │   │   │   │   │   │   │   │   'name': 'get_news'                                                                                                     │          │
│ │          │   │   │   │   │   │   │   },                                                                                                                         │          │
│ │          │   │   │   │   │   │   │   'type': 'function'                                                                                                         │          │
│ │          │   │   │   │   │   │   }                                                                                                                              │          │
│ │          │   │   │   │   │   ],                                                                                                                                 │          │
│ │          │   │   │   │   │   'refusal': None                                                                                                                    │          │
│ │          │   │   │   │   },                                                                                                                                     │          │
│ │          │   │   │   │   response_metadata={},                                                                                                                  │          │
│ │          │   │   │   │   tool_calls=[                                                                                                                           │          │
│ │          │   │   │   │   │   {                                                                                                                                  │          │
│ │          │   │   │   │   │   │   'name': 'get_global_news',                                                                                                     │          │
│ │          │   │   │   │   │   │   'args': {'curr_date': '2025-11-16', 'look_back_days': 10, 'limit': 10},                                                        │          │
│ │          │   │   │   │   │   │   'id': 'call_hB2az7UhqpSe6M07Nju0gOSP',                                                                                         │          │
│ │          │   │   │   │   │   │   'type': 'tool_call'                                                                                                            │          │
│ │          │   │   │   │   │   },                                                                                                                                 │          │
│ │          │   │   │   │   │   {                                                                                                                                  │          │
│ │          │   │   │   │   │   │   'name': 'get_news',                                                                                                            │          │
│ │          │   │   │   │   │   │   'args': {'ticker': 'AAPL', 'start_date': '2025-11-01', 'end_date': '2025-11-16'},                                              │          │
│ │          │   │   │   │   │   │   'id': 'call_C5liz770aNixGpQ6kQkcidXt',                                                                                         │          │
│ │          │   │   │   │   │   │   'type': 'tool_call'                                                                                                            │          │
│ │          │   │   │   │   │   }                                                                                                                                  │          │
│ │          │   │   │   │   ],                                                                                                                                     │          │
│ │          │   │   │   │   usage_metadata={                                                                                                                       │          │
│ │          │   │   │   │   │   'input_tokens': 879,                                                                                                               │          │
│ │          │   │   │   │   │   'output_tokens': 91,                                                                                                               │          │
│ │          │   │   │   │   │   'total_tokens': 970,                                                                                                               │          │
│ │          │   │   │   │   │   'input_token_details': {'audio': 0, 'cache_read': 0},                                                                              │          │
│ │          │   │   │   │   │   'output_token_details': {'audio': 0, 'reasoning': 0}                                                                               │          │
│ │          │   │   │   │   }                                                                                                                                      │          │
│ │          │   │   │   )                                                                                                                                          │          │
│ │          │   │   )                                                                                                                                              │          │
│ │          │   ],                                                                                                                                                 │          │
│ │          │   llm_output={                                                                                                                                       │          │
│ │          │   │   'token_usage': {                                                                                                                               │          │
│ │          │   │   │   'completion_tokens': 91,                                                                                                                   │          │
│ │          │   │   │   'prompt_tokens': 879,                                                                                                                      │          │
│ │          │   │   │   'total_tokens': 970,                                                                                                                       │          │
│ │          │   │   │   'completion_tokens_details': {                                                                                                             │          │
│ │          │   │   │   │   'accepted_prediction_tokens': 0,                                                                                                       │          │
│ │          │   │   │   │   'audio_tokens': 0,                                                                                                                     │          │
│ │          │   │   │   │   'reasoning_tokens': 0,                                                                                                                 │          │
│ │          │   │   │   │   'rejected_prediction_tokens': 0                                                                                                        │          │
│ │          │   │   │   },                                                                                                                                         │          │
│ │          │   │   │   'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}                                                                           │          │
│ │          │   │   },                                                                                                                                             │          │
│ │          │   │   'model_name': 'gpt-5.1-2025-11-13',                                                                                                            │          │
│ │          │   │   'system_fingerprint': None,                                                                                                                    │          │
│ │          │   │   'id': 'chatcmpl-CcPZToueAYlh1ZO1lAWfsyYN5iJtA',                                                                                                │          │
│ │          │   │   'service_tier': 'priority'                                                                                                                     │          │
│ │          │   }                                                                                                                                                  │          │
│ │          )                                                                                                                                                      │          │
│ │   self = CostTrackingChatOpenAI(                                                                                                                                │          │
│ │          │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,                                                          │          │
│ │          │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>,                                               │          │
│ │          │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                                                                 │          │
│ │          │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                                                                      │          │
│ │          │   model_name='gpt-5.1',                                                                                                                              │          │
│ │          │   model_kwargs={},                                                                                                                                   │          │
│ │          │   openai_api_key=SecretStr('**********'),                                                                                                            │          │
│ │          │   openai_api_base='https://api.openai.com/v1'                                                                                                        │          │
│ │          )                                                                                                                                                      │          │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯          │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/tradingagents/metrics/cost_tracker.py:141 in _record_costs                                                                             │
│                                                                                                                                                                              │
│   138 │   │   return result                                                                                                                                                  │
│   139 │                                                                                                                                                                      │
│   140 │   def _record_costs(self, result: ChatResult) -> None:                                                                                                               │
│ ❱ 141 │   │   if not self._cost_tracker or not result:                                                                                                                       │
│   142 │   │   │   return                                                                                                                                                     │
│   143 │   │                                                                                                                                                                  │
│   144 │   │   usage = self._extract_usage(result)                                                                                                                            │
│                                                                                                                                                                              │
│ ╭──────────────────────────────────────────────────────────────────────────── locals ─────────────────────────────────────────────────────────────────────────────╮          │
│ │ result = ChatResult(                                                                                                                                            │          │
│ │          │   generations=[                                                                                                                                      │          │
│ │          │   │   ChatGeneration(                                                                                                                                │          │
│ │          │   │   │   generation_info={'finish_reason': 'tool_calls', 'logprobs': None},                                                                         │          │
│ │          │   │   │   message=AIMessage(                                                                                                                         │          │
│ │          │   │   │   │   content='',                                                                                                                            │          │
│ │          │   │   │   │   additional_kwargs={                                                                                                                    │          │
│ │          │   │   │   │   │   'tool_calls': [                                                                                                                    │          │
│ │          │   │   │   │   │   │   {                                                                                                                              │          │
│ │          │   │   │   │   │   │   │   'id': 'call_hB2az7UhqpSe6M07Nju0gOSP',                                                                                     │          │
│ │          │   │   │   │   │   │   │   'function': {'arguments': '{"curr_date": "2025-11-16", "look_back_days": 10, "limit": 10}', 'name': 'get_global_news'},    │          │
│ │          │   │   │   │   │   │   │   'type': 'function'                                                                                                         │          │
│ │          │   │   │   │   │   │   },                                                                                                                             │          │
│ │          │   │   │   │   │   │   {                                                                                                                              │          │
│ │          │   │   │   │   │   │   │   'id': 'call_C5liz770aNixGpQ6kQkcidXt',                                                                                     │          │
│ │          │   │   │   │   │   │   │   'function': {                                                                                                              │          │
│ │          │   │   │   │   │   │   │   │   'arguments': '{"ticker": "AAPL", "start_date": "2025-11-01", "end_date": "2025-11-16"}',                               │          │
│ │          │   │   │   │   │   │   │   │   'name': 'get_news'                                                                                                     │          │
│ │          │   │   │   │   │   │   │   },                                                                                                                         │          │
│ │          │   │   │   │   │   │   │   'type': 'function'                                                                                                         │          │
│ │          │   │   │   │   │   │   }                                                                                                                              │          │
│ │          │   │   │   │   │   ],                                                                                                                                 │          │
│ │          │   │   │   │   │   'refusal': None                                                                                                                    │          │
│ │          │   │   │   │   },                                                                                                                                     │          │
│ │          │   │   │   │   response_metadata={},                                                                                                                  │          │
│ │          │   │   │   │   tool_calls=[                                                                                                                           │          │
│ │          │   │   │   │   │   {                                                                                                                                  │          │
│ │          │   │   │   │   │   │   'name': 'get_global_news',                                                                                                     │          │
│ │          │   │   │   │   │   │   'args': {'curr_date': '2025-11-16', 'look_back_days': 10, 'limit': 10},                                                        │          │
│ │          │   │   │   │   │   │   'id': 'call_hB2az7UhqpSe6M07Nju0gOSP',                                                                                         │          │
│ │          │   │   │   │   │   │   'type': 'tool_call'                                                                                                            │          │
│ │          │   │   │   │   │   },                                                                                                                                 │          │
│ │          │   │   │   │   │   {                                                                                                                                  │          │
│ │          │   │   │   │   │   │   'name': 'get_news',                                                                                                            │          │
│ │          │   │   │   │   │   │   'args': {'ticker': 'AAPL', 'start_date': '2025-11-01', 'end_date': '2025-11-16'},                                              │          │
│ │          │   │   │   │   │   │   'id': 'call_C5liz770aNixGpQ6kQkcidXt',                                                                                         │          │
│ │          │   │   │   │   │   │   'type': 'tool_call'                                                                                                            │          │
│ │          │   │   │   │   │   }                                                                                                                                  │          │
│ │          │   │   │   │   ],                                                                                                                                     │          │
│ │          │   │   │   │   usage_metadata={                                                                                                                       │          │
│ │          │   │   │   │   │   'input_tokens': 879,                                                                                                               │          │
│ │          │   │   │   │   │   'output_tokens': 91,                                                                                                               │          │
│ │          │   │   │   │   │   'total_tokens': 970,                                                                                                               │          │
│ │          │   │   │   │   │   'input_token_details': {'audio': 0, 'cache_read': 0},                                                                              │          │
│ │          │   │   │   │   │   'output_token_details': {'audio': 0, 'reasoning': 0}                                                                               │          │
│ │          │   │   │   │   }                                                                                                                                      │          │
│ │          │   │   │   )                                                                                                                                          │          │
│ │          │   │   )                                                                                                                                              │          │
│ │          │   ],                                                                                                                                                 │          │
│ │          │   llm_output={                                                                                                                                       │          │
│ │          │   │   'token_usage': {                                                                                                                               │          │
│ │          │   │   │   'completion_tokens': 91,                                                                                                                   │          │
│ │          │   │   │   'prompt_tokens': 879,                                                                                                                      │          │
│ │          │   │   │   'total_tokens': 970,                                                                                                                       │          │
│ │          │   │   │   'completion_tokens_details': {                                                                                                             │          │
│ │          │   │   │   │   'accepted_prediction_tokens': 0,                                                                                                       │          │
│ │          │   │   │   │   'audio_tokens': 0,                                                                                                                     │          │
│ │          │   │   │   │   'reasoning_tokens': 0,                                                                                                                 │          │
│ │          │   │   │   │   'rejected_prediction_tokens': 0                                                                                                        │          │
│ │          │   │   │   },                                                                                                                                         │          │
│ │          │   │   │   'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}                                                                           │          │
│ │          │   │   },                                                                                                                                             │          │
│ │          │   │   'model_name': 'gpt-5.1-2025-11-13',                                                                                                            │          │
│ │          │   │   'system_fingerprint': None,                                                                                                                    │          │
│ │          │   │   'id': 'chatcmpl-CcPZToueAYlh1ZO1lAWfsyYN5iJtA',                                                                                                │          │
│ │          │   │   'service_tier': 'priority'                                                                                                                     │          │
│ │          │   }                                                                                                                                                  │          │
│ │          )                                                                                                                                                      │          │
│ │   self = CostTrackingChatOpenAI(                                                                                                                                │          │
│ │          │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,                                                          │          │
│ │          │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>,                                               │          │
│ │          │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                                                                 │          │
│ │          │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                                                                      │          │
│ │          │   model_name='gpt-5.1',                                                                                                                              │          │
│ │          │   model_kwargs={},                                                                                                                                   │          │
│ │          │   openai_api_key=SecretStr('**********'),                                                                                                            │          │
│ │          │   openai_api_base='https://api.openai.com/v1'                                                                                                        │          │
│ │          )                                                                                                                                                      │          │
│ ╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯          │
│                                                                                                                                                                              │
│ /Users/beckett/Projects/TradingAgents/.venv/lib/python3.10/site-packages/pydantic/main.py:991 in __getattr__                                                                 │
│                                                                                                                                                                              │
│    988 │   │   │   │   │   │   return super().__getattribute__(item)  # Raises AttributeError i                                                                              │
│    989 │   │   │   │   │   else:                                                                                                                                             │
│    990 │   │   │   │   │   │   # this is the current error                                                                                                                   │
│ ❱  991 │   │   │   │   │   │   raise AttributeError(f'{type(self).__name__!r} object has no att                                                                              │
│    992 │   │                                                                                                                                                                 │
│    993 │   │   def __setattr__(self, name: str, value: Any) -> None:                                                                                                         │
│    994 │   │   │   if (setattr_handler := self.__pydantic_setattr_handlers__.get(name)) is not                                                                               │
│                                                                                                                                                                              │
│ ╭─────────────────────────────────────────────────────────── locals ────────────────────────────────────────────────────────────╮                                            │
│ │               item = '_cost_tracker'                                                                                          │                                            │
│ │ private_attributes = {}                                                                                                       │                                            │
│ │     pydantic_extra = None                                                                                                     │                                            │
│ │               self = CostTrackingChatOpenAI(                                                                                  │                                            │
│ │                      │   client=<openai.resources.chat.completions.completions.Completions object at 0x1228281c0>,            │                                            │
│ │                      │   async_client=<openai.resources.chat.completions.completions.AsyncCompletions object at 0x1228282b0>, │                                            │
│ │                      │   root_client=<openai.OpenAI object at 0x12282ead0>,                                                   │                                            │
│ │                      │   root_async_client=<openai.AsyncOpenAI object at 0x122828220>,                                        │                                            │
│ │                      │   model_name='gpt-5.1',                                                                                │                                            │
│ │                      │   model_kwargs={},                                                                                     │                                            │
│ │                      │   openai_api_key=SecretStr('**********'),                                                              │                                            │
│ │                      │   openai_api_base='https://api.openai.com/v1'                                                          │                                            │
│ │                      )                                                                                                        │                                            │
│ ╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯                                            │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
AttributeError: 'CostTrackingChatOpenAI' object has no attribute '_cost_tracker'